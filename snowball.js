/*skOuterClick - A simple event-binder-plugin to handle click events of outside elements.(c) 2012 SUKOBUTO.*/(function(A,p){A.fn.skOuterClick=function(r){var k={init:function(r){var h=[$(this)],l=arguments.length;if(1<l)for(i=1;i<l;i++)h[h.length]=arguments[i];return this.each(function(){var l=this,s=!1,k;for(k in h)A(p.document).find(h[k]).on("click",function(){s=!0}).on("mouseleave",function(){s=!1});A(p.document).on("click",function(p){s?s=!1:r.call(l,p)})})}};if(k[r])return k[r].apply(this,Array.prototype.slice.call(arguments,1));if("function"===typeof r)return k.init.apply(this,arguments)}})(jQuery,this);(function(A,p){p(function(){p("body").on("dragover",function(b){b.preventDefault();b.stopPropagation();return!1});var r=p("#rform"),k=p("#lform"),F=k.find("#compress"),h=r.find("#options"),l=h.find("input"),x=h.find("select"),s=h.find("#option_menu"),G=h.find("#option"),v=s.find("#option_show"),I=s.find("#option_all"),B=k.find("#aft"),E=k.find("#bef"),C=localStorage,D=JSON,H=!0;if(null!=D.parse(C.getItem("input_option"))){for(var q=D.parse(C.getItem("input_option")),y=D.parse(C.getItem("select_option")),f=0,z=l.length;f<z;f++)q[l.eq(f).attr("id")]?l.eq(f).attr("checked",!0):l.eq(f).attr("checked",!1);f=0;for(z=x.length;f<z;f++)x.eq(f).val(y[x.eq(f).attr("id")])}else{q={};y={};f=0;for(z=l.length;f<z;f++)q[l.eq(f).attr("id")]=l.eq(f).attr("checked");f=0;for(z=x.length;f<z;f++)y[x.eq(f).attr("id")]=x.eq(f).find("option:selected").val()}r.css3form();var m=s.find(".customCheckBox").find("a"),J=m.css("width"),K=s.css("width");s.skOuterClick(function(){m.is(":visible")&&v.trigger("click")},G,E,B,I);k.on("click",".select , .reset",function(b){b.stopPropagation();p(this).siblings("textarea").select()}).on("click","#compress",function(b){function f(b){for(var c=d=0,e=b.length;d<e;d++)c+=4>escape(b.charAt(d)).length?1:2;return c}function s(b,c){for(var f=/([.#\w ,:-\[\]=\"\']+?)\{([\s\S]*?)\}/gim,e=b.match(f),f=b.match(f),m=null!=e?e.length:0,l=0,p=RegExp("("+c+"(?:-left|-right|-top|-bottom)? ?: ?([^;$]+)([;$]?))","gim");l<m;l++){var t=e[l].match(/([.#\w ,:-\[\]=\"\']+?)\{([\s\S]*?)\}/im)[2],q=t,j=q.match(p);if(null!=j){for(var u=null,h=null,w=null,k=null,n=0,r=j.length;n<r;n++){j[n]=j[n].replace(p,"$1:$2").split(":");j[n][1]=j[n][1].replace(/;$/,"");var v=j[n][0].toLowerCase();v==c?(a=j[n][1].replace(/;/g,"").replace(/ /g,",").split(","),g=a.length,2==g?(u=h=a[0],w=k=a[1]):3==g?(u=a[0],w=k=a[1],h=a[2]):4==g?(u=a[0],w=a[1],h=a[2],k=a[3]):u=w=h=k=a[0]):v==c+"-top"?u=j[n][1]:v==c+"-right"?w=j[n][1]:v==c+"-bottom"?h=j[n][1]:v==c+"-left"&&(k=j[n][1])}if(null!=u&&null!=w&&null!=k&&null!=h){var L=u==w&&u==h&&u==k?u:u==h&&w==k&&u!=w?u+" "+w:w==k&&u!=h?u+" "+w+" "+h:u+" "+w+" "+h+" "+k,r=q.match(p),r=null!=r?r.length:0,n=0,q=q.replace(RegExp("("+c+"(?:-left|-right|-top|-bottom)? ?: ?([^;$]+)([;$]?)([\r\n]?))","gim"),function(b,e,f,j,h){return++n==r?c+":"+L+(j||"")+h:""});e[l]=e[l].replace(t,q)}}}for(n=0;n<m;n++)f[n]!=e[n]&&(b=b.replace(f[n],e[n]));return b=b.replace(RegExp("("+c+"[s]?:[s]?)([^;$]+?[;$])","gi"),function(b,c,e){var b=e.replace(/ /g,",").split(","),f=b.length;2==f?b[0]==b[1]&&(e=b[0]):3==f?b[0]==b[2]&&(e=b[0]==b[1]?b[0]:b[0]+" "+b[1]):4==f&&b[1]==b[3]&&(b[0]==b[2]?b[0]!=b[1]&&(e=b[0]+" "+b[1]):e=b[0]+" "+b[1]+" "+b[2]);return c+e})}b.preventDefault();b.stopPropagation();String.prototype.count=function(b){for(var c=t=0;-1!=this.indexOf(b,t);)t=this.indexOf(b,t)+1,c++;return c};for(var c=E.val(),b=f(c),m=Math,t=0,j=l.length;t<j;t++)q[l.eq(t).attr("id")]=l.eq(t).attr("checked");j={comment:[/(\/\*([\s]|.)+?\*\/)/g,""],zero:[/(\D)[0](?:em|px|%)/g,"$10"],decimals:[/([\D])0\.(\d)/g,"$1.$2"]};p.each(j,function(b,e){q[b]&&(c=c.replace(e[0],e[1]))});q.option?(j={indent:[/^[\s]*/gm,""],line:[/[\r\n]/g,""],comma:[/[\t ]*[,][\t ]*/g,","],colon:[/[\t ]*[:][\t ]*/g,":"],semicolon:[/[\t ]*[;][\t ]*/g,";"],sc_bracket:[/[\t ]*[\{][\t ]*/g,"{"],important:[/[\t ]*(!important)[\t ]*/g,"$1"],ec_bracket:[/[\t ]*;[\t ]*\}[\t\d]*/g,"}"],ec_bracket:[/([^\t ]+?)[\t ]*\}[\t ]*/g,"$1}"]},p.each(j,function(b,e){q[b]&&(c=c.replace(e[0],e[1]))})):c=c.replace(/^[\s]*/gm,"").replace(/[\r\n]/g,"").replace(/[\t ]*([,:;\{]|(?:!important))[\t ]*/g,"$1").replace(/[\t ]*;[\t ]*\}[\t\d]*/g,"}").replace(/([^\t ]+?)[\t ]*}[\t ]*/g,"$1}");if(q.color_name){var j={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aquamarine:"#7fffd4",black:"#000",blanchedalmond:"#ffebcd",blueviolet:"#8a2be2",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#f0f",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",greenyellow:"#adff2f",honeydew:"#f0fff0",indianred:"#cd5c5c",lavendar:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#789",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",limegreen:"#32cd32",magenta:"#f0f",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",olivedrab:"#6b8e23",orangered:"#ff4500",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhite:"#ffefd5",peachpuff:"#ffdab9",powderblue:"#b0e0e6",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",slateblue:"#6a5acd",slategray:"#708090",springgreen:"#00ff7f",steelblue:"#4682b4",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",yellow:"#ff0",yellowgreen:"#9acd32","#f0ffff":"azure","#f5f5dc":"beige","#ffe4c4":"bisque","#a52a2a":"brown","#ff7f50":"coral","#ffd700":"gold","#808080":"gray","#008000":"green","#4b0082":"indigo","#fffff0":"ivory","#f0e68c":"khaki","#faf0e6":"linen","#800000":"maroon","#000080":"navy","#808000":"olive","#ffa500":"orange","#da70d6":"orchid","#cd853f":"peru","#ffc0cb":"pink","#dda0dd":"plum","#800080":"purple","#f00":"red","#fa8072":"salmon","#a0522d":"sienna","#c0c0c0":"silver","#fffafa":"snow","#d2b48c":"tan","#008080":"teal","#ff6347":"tomato","#ee82ee":"violet","#f5deb3":"wheat"},e;for(e in j)-1!=c.indexOf(e)&&(c=c.replace(RegExp("([: ,)(]|[\t ]?:[\t ]?)([^;{}]*?)"+e+"((?:!important)|[, )(;}\n\r])","gim"),"$1$2"+j[e]+"$3"))}-1!=c.indexOf("padding")&&q.padding&&(c=s(c,"padding"));-1!=c.indexOf("margin")&&q.margin&&(c=s(c,"margin"));q.color&&(c=c.replace(/\#([0-9a-fA-F])\1([0-9a-fA-F])\2([0-9a-fA-F])\3/g,"#$1$2$3"));if(q.lower){j=/([.#\w ,:-\[\]=\"\']+?)\{([\s\S]*?)\}/gim;e=c.match(j);var h=c.match(j);if(null!=e){t=0;for(j=e.length;t<j;t++)e[t]=e[t].replace(/([: ,)(]|[\t ]?:[\t ]?)(#[0-9a-fA-F][0-9a-fA-F]?[0-9a-fA-F][0-9a-fA-F]?[0-9a-fA-F][0-9a-fA-F]?)/g,function(b,c,e){return c+e.toLowerCase()}),c=c.replace(h[t],e[t])}}e=f(c);B.val(c).select();1024>b?r.find("#results").find("#befB").text(b+" B").end().find("#aftB").text(e+" B").end().find("#minus").text(b==e?"\u00b10B(0%)":"-"+(b-e)+" B("+(100-100*e/b).toFixed(2)+"%)"):r.find("#results").find("#befB").text(m.floor(b/1024)+" KB("+b+" B)").end().find("#aftB").text(m.floor(e/1024)+" KB("+e+" B)").end().find("#minus").text(b==e?"\u00b10B(0%)":"-"+m.floor((b-e)/1024)+" KB("+(b-e)+" B)("+(100-100*e/b).toFixed(2)+"%)");k.find("#mes").stop(!0,!1).addClass("on").css("opacity","1").fadeTo(1500,0.3,function(){p(this).removeClass("on")})}).find("#bef").select();if(A.File)E.on("dragenter",function(b){b.preventDefault();b.stopPropagation()}).on("dragover",function(b){b.originalEvent.dataTransfer.dropEffect="copy";b.preventDefault();b.stopPropagation()}).on("drop",function(b){b.preventDefault();b.stopPropagation();b=b.originalEvent;b=b.dataTransfer.files;y.encode=x.filter("#encode").find("option:selected").val();for(var f=0,h=b.length;f<h;f++){var c=new FileReader;c.readAsText(b[f],y.encode);c.onload=p.proxy(function(){p(this).val(c.result);F.trigger("click")},this)}});else E.attr("placeholder","\u3053\u3053\u306b\u30b3\u30fc\u30c9\u3092\u30da\u30fc\u30b9\u30c8\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u3069\u3046\u3084\u3089\u304a\u4f7f\u3044\u306e\u30d6\u30e9\u30a6\u30b6\u3067\u306f\u30c9\u30e9\u30c3\u30b0\u30a2\u30f3\u30c9\u30c9\u30ed\u30c3\u30d7\u306f\u5bfe\u5fdc\u3057\u3066\u3044\u306a\u3044\u3088\u3046\u3067\u3059\u3002");p(A).on("keydown",function(b){if(b.metaKey&&!b.ctrlKey||!b.ctrlKey&&b.metaKey)if(13==b.keyCode)F.trigger("click");else if(b.altKey&&(80==b.keyCode||83==b.keyCode))return event.preventDefault(),event.stopPropagation(),F.trigger("click"),80==b.keyCode?B.val(B.val().replace(/(http:\/\/)/g,"//")):83==b.keyCode&&B.val(B.val().replace(/(https:\/\/)/g,"//")),!1});G.on("click",function(b){b.stopPropagation();!m.is(":animated")&&!s.is(":animated")&&(G.attr("checked")?(v.text("Show"),s.stop(!0,!1).animate({width:"0"},200,function(){s.hide();m.show().css("width",J)}),v.removeClass("show hide").addClass("show")):(v.text("Hide"),s.css({width:"0"}).show().stop(!0,!1).animate({width:K},200)))});v.on("click",function(b){b.preventDefault();b.stopPropagation();!m.is(":animated")&&!s.is(":animated")&&(m.is(":visible")?(v.text("Show"),m.stop(!0,!1).animate({width:"0"},200,function(){m.hide()}),v.removeClass("show hide").addClass("hide")):(v.text("Hide"),m.css({width:"0"}).show().stop(!0,!1).animate({width:J},200),v.removeClass("show hide").addClass("show")))});I.on("click",function(b){b.preventDefault();b.stopPropagation();if(m.is(":visible")){for(var b=0,f=m.length;b<f;b++)H?m.eq(b).hasClass("checked")&&m.eq(b).trigger("click"):m.eq(b).hasClass("checked")||m.eq(b).trigger("click");H=!H}});r.on("click","#save",function(b){b.preventDefault();b.stopPropagation();for(var b=0,f=l.length;b<f;b++)q[l.eq(b).attr("id")]="checked"==l.eq(b).attr("checked");for(var b=0,k=h.find("select"),f=k.length;b<f;b++)y[k.eq(b).attr("id")]=k.eq(b).find("option:selected").val();C.setItem("input_option",D.stringify(q));C.setItem("select_option",D.stringify(y))})})})(this,jQuery);