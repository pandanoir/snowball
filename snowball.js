/*skOuterClick - A simple event-binder-plugin to handle click events of outside elements.(c) 2012 SUKOBUTO.*/(function(y,r){y.fn.skOuterClick=function(u){var s={init:function(u){var m=[$(this)],n=arguments.length;if(1<n)for(i=1;i<n;i++)m[m.length]=arguments[i];return this.each(function(){var n=this,t=!1,s;for(s in m)y(r.document).find(m[s]).on("click",function(){t=!0}).on("mouseleave",function(){t=!1});y(r.document).on("click",function(r){t?t=!1:u.call(n,r)})})}};if(s[u])return s[u].apply(this,Array.prototype.slice.call(arguments,1));if("function"===typeof u)return s.init.apply(this,arguments)}})(jQuery,this);(function(y,r){r(function(){r("body").on("dragover",function(b){b.preventDefault();b.stopPropagation();return!1});var u=r("#rform"),s=r("#lform"),D=s.find("#compress"),m=u.find("#options"),n=m.find("input"),v=m.find("select"),t=m.find("#option_menu"),E=m.find("#option"),q=t.find("#option_show"),G=t.find("#option_all"),z=s.find("#aft"),C=s.find("#bef"),A=localStorage,B=JSON,F=!0;if(null!=B.parse(A.getItem("input_option"))){for(var j=B.parse(A.getItem("input_option")),w=B.parse(A.getItem("select_option")),h=0,x=n.length;h<x;h++)j[n.eq(h).attr("id")]?n.eq(h).attr("checked",!0):n.eq(h).attr("checked",!1);h=0;for(x=v.length;h<x;h++)v.eq(h).val(w[v.eq(h).attr("id")])}else{j={};w={};h=0;for(x=n.length;h<x;h++)j[n.eq(h).attr("id")]=n.eq(h).attr("checked");h=0;for(x=v.length;h<x;h++)w[v.eq(h).attr("id")]=v.eq(h).find("option:selected").val()}u.css3form();var k=t.find("div.customCheckBox").find("a"),H=k.css("width"),I=t.css("width");t.skOuterClick(function(){k.is(":visible")&&q.trigger("click")},E,C,z,G);s.on("click",".select , .reset",function(b){b.stopPropagation();r(this).siblings("textarea").select()}).on("click","#compress",function(b){function h(b){for(var e=d=0,f=b.length;d<f;d++)e+=4>escape(b.charAt(d)).length?1:2;d=void 0;return e}function t(b,e){for(var f=/([.#\w ,:-\[\]=\"\']+?)\{([\s\S]*?)\}/gim,h=b.match(f),f=b.match(f),l=null!=h?h.length:0,k=0,n=RegExp("("+e+"(?:-left|-right|-top|-bottom)? ?: ?([^;$]+)([;$]?))","gim");k<l;k++){var r=h[k].match(/([.#\w ,:-\[\]=\"\']+?)\{([\s\S]*?)\}/im)[2],m=h[k].match(/([.#\w ,:-\[\]=\"\']+?)\{([\s\S]*?)\}/im)[2],j=m.match(n);if(null!=j){for(var c={top:null,bottom:null,right:null,left:null},p=0,q=j.length;p<q;p++){j[p]=j[p].replace(n,"$1:$2").split(":");j[p][1]=j[p][1].replace(/;$/,"");var s=j[p][0].toLowerCase();s==e?(a=j[p][1].replace(/;/g,"").replace(/ /g,",").split(","),g=a.length,2==g?(c.t=c.b=a[0],c.r=c.l=a[1]):3==g?(c.t=a[0],c.r=c.l=a[1],c.b=a[2]):4==g?(c.t=a[0],c.r=a[1],c.b=a[2],c.l=a[3]):c.t=c.r=c.b=c.l=a[0]):s==e+"-top"?c.t=j[p][1]:s==e+"-right"?c.r=j[p][1]:s==e+"-bottom"?c.b=j[p][1]:s==e+"-left"&&(c.l=j[p][1])}if(null!=c.t&&null!=c.r&&null!=c.l&&null!=c.b){var u=c.t==c.r&&c.t==c.b&&c.t==c.l?c.t:c.t==c.b&&c.r==c.l&&c.t!=c.r?c.t+" "+c.r:c.r==c.l&&c.t!=c.b?c.t+" "+c.r+" "+c.b:c.t+" "+c.r+" "+c.b+" "+c.l,q=m.match(n),q=null!=q?q.length:0,p=0,m=m.replace(RegExp("("+e+"(?:-left|-right|-top|-bottom)? ?: ?([^;$]+)([;$]?)([\r\n]?))","gim"),function(b,c,f,h,j){return++p==q?e+":"+u+(h||"")+j:""});h[k]=h[k].replace(r,m);m=p=q=void 0}c=void 0}}for(p=0;p<l;p++)f[p]!=h[p]&&(b=b.replace(f[p],h[p]));blockpattern=n=f=h=r=m=j=s=k=l=void 0;return b.replace(RegExp("("+e+"[s]?:[s]?)([^;$]+?[;$])","gi"),function(b,c,e){var b=e.replace(/ /g,",").split(","),f=b.length;2==f?b[0]==b[1]&&(e=b[0]):3==f?b[0]==b[2]&&(e=b[0]==b[1]?b[0]:b[0]+" "+b[1]):4==f&&b[1]==b[3]&&(b[0]==b[2]?b[0]!=b[1]&&(e=b[0]+" "+b[1]):e=b[0]+" "+b[1]+" "+b[2]);return c+e})}b.preventDefault();b.stopPropagation();for(var e=C.val(),b=h(e),k=Math,f=0,m=n.length;f<m;f++)j[n.eq(f).attr("id")]=n.eq(f).attr("checked");f={comment:[/(\/\*([\s]|.)+?\*\/)/g,""],zero:[/(\D)[0](?:em|px|%)/g,"$10"],decimals:[/([\D])0\.(\d)/g,"$1.$2"]};r.each(f,function(b,f){j[b]&&(e=e.replace(f[0],f[1]))});f=void 0;j.option?(f={indent:[/^[\s]*/gm,""],line:[/[\r\n]/g,""],comma:[/[\t ]*[,][\t ]*/g,","],colon:[/[\t ]*[:][\t ]*/g,":"],semicolon:[/[\t ]*[;][\t ]*/g,";"],sc_bracket:[/[\t ]*[\{][\t ]*/g,"{"],important:[/[\t ]*(!important)[\t ]*/g,"$1"],ec_bracket:[/[\t ]*;[\t ]*\}[\t\d]*/g,"}"],ec_bracket:[/([^\t ]+?)[\t ]*\}[\t ]*/g,"$1}"]},r.each(f,function(b,f){j[b]&&(e=e.replace(f[0],f[1]))}),f=void 0):e=e.replace(/^[\s]*/gm,"").replace(/[\r\n]/g,"").replace(/[\t ]*([,:;\{]|(?:!important))[\t ]*/g,"$1").replace(/[\t ]*;[\t ]*\}[\t\d]*/g,"}").replace(/([^\t ]+?)[\t ]*}[\t ]*/g,"$1}");if(j.color_name){var f={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aquamarine:"#7fffd4",black:"#000",blanchedalmond:"#ffebcd",blueviolet:"#8a2be2",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#f0f",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",greenyellow:"#adff2f",honeydew:"#f0fff0",indianred:"#cd5c5c",lavendar:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#789",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",limegreen:"#32cd32",magenta:"#f0f",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",olivedrab:"#6b8e23",orangered:"#ff4500",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhite:"#ffefd5",peachpuff:"#ffdab9",powderblue:"#b0e0e6",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",slateblue:"#6a5acd",slategray:"#708090",springgreen:"#00ff7f",steelblue:"#4682b4",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",yellow:"#ff0",yellowgreen:"#9acd32","#f0ffff":"azure","#f5f5dc":"beige","#ffe4c4":"bisque","#a52a2a":"brown","#ff7f50":"coral","#ffd700":"gold","#808080":"gray","#008000":"green","#4b0082":"indigo","#fffff0":"ivory","#f0e68c":"khaki","#faf0e6":"linen","#800000":"maroon","#000080":"navy","#808000":"olive","#ffa500":"orange","#da70d6":"orchid","#cd853f":"peru","#ffc0cb":"pink","#dda0dd":"plum","#800080":"purple","#f00":"red","#fa8072":"salmon","#a0522d":"sienna","#c0c0c0":"silver","#fffafa":"snow","#d2b48c":"tan","#008080":"teal","#ff6347":"tomato","#ee82ee":"violet","#f5deb3":"wheat"},l;for(l in f)-1!=e.indexOf(l)&&(e=e.replace(RegExp("([: ,)(]|[\t ]?:[\t ]?)([^;{}]*?)"+l+"((?:!important)|[, )(;}\n\r])","gim"),"$1$2"+f[l]+"$3"));f=void 0}-1!=e.indexOf("padding")&&j.padding&&(e=t(e,"padding"));-1!=e.indexOf("margin")&&j.margin&&(e=t(e,"margin"));j.color&&(e=e.replace(/\#([0-9a-fA-F])\1([0-9a-fA-F])\2([0-9a-fA-F])\3/g,"#$1$2$3"));if(j.lower){f=/([.#\w ,:-\[\]=\"\']+?)\{([\s\S]*?)\}/gim;l=e.match(f);var q=e.match(f);if(null!=l){f=0;for(m=l.length;f<m;f++)l[f]=l[f].replace(/([: ,)(]|[\t ]?:[\t ]?)(#[0-9a-fA-F][0-9a-fA-F]?[0-9a-fA-F][0-9a-fA-F]?[0-9a-fA-F][0-9a-fA-F]?)/g,function(b,e,f){return e+f.toLowerCase()}),e=e.replace(q[f],l[f])}f=q=l=void 0}l=h(e);z.val(e).select();1024>b?u.find("#results").find("#befB").text(b+" B").end().find("#aftB").text(l+" B").end().find("#minus").text(b==l?"\u00b10B(0%)":"-"+(b-l)+" B("+(100-100*l/b).toFixed(2)+"%)"):u.find("#results").find("#befB").text(k.floor(b/1024)+" KB("+b+" B)").end().find("#aftB").text(k.floor(l/1024)+" KB("+l+" B)").end().find("#minus").text(b==l?"\u00b10B(0%)":"-"+k.floor((b-l)/1024)+" KB("+(b-l)+" B)("+(100-100*l/b).toFixed(2)+"%)");f=m=e=b=l=k=void 0;s.find("#mes").stop(!0,!1).addClass("on").css("opacity","1").fadeTo(1500,0.3,function(){r(this).removeClass("on")})}).find("#bef").select();if(y.File)C.on("dragenter",function(b){b.preventDefault();b.stopPropagation()}).on("dragover",function(b){b.originalEvent.dataTransfer.dropEffect="copy";b.preventDefault();b.stopPropagation()}).on("drop",function(b){b.preventDefault();b.stopPropagation();b=b.originalEvent;b=b.dataTransfer.files;w.encode=v.filter("#encode").find("option:selected").val();for(var h=0,j=b.length;h<j;h++){var e=new FileReader;e.readAsText(b[h],w.encode);e.onload=r.proxy(function(){r(this).val(e.result);D.trigger("click")},this)}b=e=b=void 0});else C.attr("placeholder","\u3053\u3053\u306b\u30b3\u30fc\u30c9\u3092\u30da\u30fc\u30b9\u30c8\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u3069\u3046\u3084\u3089\u304a\u4f7f\u3044\u306e\u30d6\u30e9\u30a6\u30b6\u3067\u306f\u30c9\u30e9\u30c3\u30b0\u30a2\u30f3\u30c9\u30c9\u30ed\u30c3\u30d7\u306f\u5bfe\u5fdc\u3057\u3066\u3044\u306a\u3044\u3088\u3046\u3067\u3059\u3002");r(y).on("keydown",function(b){if(!b.metaKey&&b.ctrlKey||b.metaKey&&!b.ctrlKey)if(13==b.keyCode)D.trigger("click");else if(b.altKey&&(80==b.keyCode||83==b.keyCode))return event.preventDefault(),event.stopPropagation(),D.trigger("click"),80==b.keyCode?z.val(z.val().replace(/(http:\/\/)/g,"//")):z.val(z.val().replace(/(https:\/\/)/g,"//")),!1});E.on("click",function(b){b.stopPropagation();!k.is(":animated")&&!t.is(":animated")&&(E.attr("checked")?(q.text("Show"),t.stop(!0,!1).animate({width:"0"},200,function(){t.hide();k.show().css("width",H)}),q.removeClass("show hide").addClass("show")):(q.text("Hide"),t.css({width:"0"}).show().stop(!0,!1).animate({width:I},200)))});q.on("click",function(b){b.preventDefault();b.stopPropagation();!k.is(":animated")&&!t.is(":animated")&&(k.is(":visible")?(q.text("Show"),k.stop(!0,!1).animate({width:"0"},200,function(){k.hide()}),q.removeClass("show hide").addClass("hide")):(q.text("Hide"),k.css({width:"0"}).show().stop(!0,!1).animate({width:H},200),q.removeClass("show hide").addClass("show")))});G.on("click",function(b){b.preventDefault();b.stopPropagation();if(k.is(":visible")){for(var b=0,h=k.length;b<h;b++)F?k.eq(b).hasClass("checked")&&k.eq(b).trigger("click"):k.eq(b).hasClass("checked")||k.eq(b).trigger("click");F=!F}});u.on("click","#save",function(b){b.preventDefault();b.stopPropagation();for(var b=0,h=n.length;b<h;b++)j[n.eq(b).attr("id")]="checked"==n.eq(b).attr("checked");for(var b=0,k=m.find("select"),h=k.length;b<h;b++)w[k.eq(b).attr("id")]=k.eq(b).find("option:selected").val();A.setItem("input_option",B.stringify(j));A.setItem("select_option",B.stringify(w))})})})(this,jQuery);