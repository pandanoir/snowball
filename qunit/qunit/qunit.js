/**
 * QUnit v1.11.0pre - A JavaScript Unit Testing Framework
 *
 * http://qunitjs.com
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
(function(l){function H(a){r(this,a);this.assertions=[];this.testNumber=++H.count}function O(a){var b=d.filter&&d.filter.toLowerCase(),c=d.module&&d.module.toLowerCase(),j=(a.module+": "+a.testName).toLowerCase();if(a.callback&&a.callback.validTest===O)return delete a.callback.validTest,!0;if(d.testNumber)return a.testNumber===d.testNumber;if(c&&(!a.module||a.module.toLowerCase()!==c))return!1;if(!b)return!0;(a="!"!==b.charAt(0))||(b=b.slice(1));return-1!==j.indexOf(b)?a:!a}function I(a,b){b=void 0===b?3:b;var c,d,e;if(a.stacktrace)return a.stacktrace.split("\n")[b+3];if(a.stack){c=a.stack.split("\n");/^error$/i.test(c[0])&&c.shift();if(S){d=[];for(e=b;e<c.length&&-1===c[e].indexOf(S);e++)d.push(c[e]);if(d.length)return d.join("\n")}return c[b]}if(a.sourceURL&&!/qunit.js$/.test(a.sourceURL))return a.sourceURL+":"+a.line}function v(a){try{throw Error();}catch(b){return I(b,a)}}function n(a){return!a?"":(a+"").replace(/['"<>&]/g,function(a){switch(a){case "'":return"&#039;";case '"':return"&quot;";case "<":return"&lt;";case ">":return"&gt;";case "&":return"&amp;"}})}function B(a,b){d.queue.push(a);d.autorun&&!d.blocking&&J(b)}function J(a){function b(){J(a)}var c=(new s).getTime();for(d.depth=d.depth?d.depth+1:1;d.queue.length&&!d.blocking;)if(!w.setTimeout||0>=d.updateRate||(new s).getTime()-c<d.updateRate)d.queue.shift()();else{l.setTimeout(b,13);break}d.depth--;if(a&&!d.blocking&&!d.queue.length&&0===d.depth){d.autorun=!0;d.currentModule&&t("moduleDone",e,{name:d.currentModule,failed:d.moduleStats.bad,passed:d.moduleStats.all-d.moduleStats.bad,total:d.moduleStats.all});var j,g;j=p("qunit-banner");g=p("qunit-tests");var c=+new s-d.started,f=d.stats.all-d.stats.bad,h=f==d.stats.all?["\u30c6\u30b9\u30c8\u306f ",c," \u30df\u30ea\u79d2\u3067\u5b8c\u4e86\u3057\u307e\u3057\u305f.<br/><span class='passed'>",f,"</span> \u30c6\u30b9\u30c8\u3059\u3079\u3066\u6210\u529f\u3067\u3057\u305f. <span class='total'></span><span class='failed'></span>"].join(""):["\u30c6\u30b9\u30c8\u306f ",c," \u30df\u30ea\u79d2\u3067\u5b8c\u4e86\u3057\u307e\u3057\u305f.<br/><span class='passed'>",d.stats.all,"</span> \u30c6\u30b9\u30c8\u306e\u3046\u3061 <span class='total'>",f,"</span> \u500b \u6210\u529f, <span class='failed'>",d.stats.bad,"</span> \u500b \u5931\u6557\u3057\u307e\u3057\u305f."].join("");j&&(j.className=d.stats.bad?"qunit-fail":"qunit-pass");g&&(p("qunit-testresult").innerHTML=h);d.altertitle&&("undefined"!==typeof document&&document.title)&&(document.title=[d.stats.bad?"\u2716":"\u2714",document.title.replace(/^[\u2714\u2716] /i,"")].join(" "));if(d.reorder&&w.sessionStorage&&0===d.stats.bad)for(j=0;j<sessionStorage.length;j++)g=sessionStorage.key(j++),0===g.indexOf("qunit-test-")&&sessionStorage.removeItem(g);l.scrollTo&&l.scrollTo(0,0);t("done",e,{failed:d.stats.bad,passed:f,total:d.stats.all,runtime:c})}}function P(){d.pollution=[];if(d.noglobals)for(var a in l)y.call(l,a)&&!/^qunit-test-output/.test(a)&&d.pollution.push(a)}function T(a,b){var c,d,e=a.slice();for(c=0;c<e.length;c++)for(d=0;d<b.length;d++)if(e[c]===b[d]){e.splice(c,1);c--;break}return e}function r(a,b){for(var c in b)if(void 0===b[c])delete a[c];else if("constructor"!==c||a!==l)a[c]=b[c];return a}function z(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)}function U(a,b){-1<(" "+a.className+" ").indexOf(" "+b+" ")||(a.className+=(a.className?" ":"")+b)}function W(a,b){for(var c=" "+a.className+" ";-1<c.indexOf(" "+b+" ");)c=c.replace(" "+b+" "," ");a.className=l.jQuery?jQuery.trim(c):c.trim?c.trim():c}function p(a){return!!("undefined"!==typeof document&&document&&document.getElementById)&&document.getElementById(a)}function A(a){return function(b){d[a].push(b)}}function t(a,b,c){var j;if(e.hasOwnProperty(a))e[a].call(b,c);else{j=d[a];for(a=0;a<j.length;a++)j[a].call(b,c)}}var e,m,d,Q,X=0,S=(v(0)||"").replace(/(:\d+)+\)?/,"").replace(/.+\//,""),V=Object.prototype.toString,y=Object.prototype.hasOwnProperty,s=l.Date;m="undefined"!==typeof l.setTimeout;var q;try{sessionStorage.setItem("qunit-test-string","qunit-test-string"),sessionStorage.removeItem("qunit-test-string"),q=!0}catch(aa){q=!1}var w={setTimeout:m,sessionStorage:q},Y=function(a){var b;b=a.toString();return"[object"===b.substring(0,7)?(b=a.name?a.name.toString():"Error",a=a.message?a.message.toString():"",b&&a?b+": "+a:b?b:a?a:"Error"):b},D=function(a){var b,c,d=e.is("array",a)?[]:{};for(b in a)y.call(a,b)&&(c=a[b],d[b]=c===Object(c)?D(c):c);return d};H.count=0;H.prototype={init:function(){var a,b,c,d=p("qunit-tests");d&&(b=document.createElement("strong"),b.innerHTML=this.nameHtml,a=document.createElement("a"),a.innerHTML="\u518d\u5b9f\u884c",a.href=e.url({testNumber:this.testNumber}),c=document.createElement("li"),c.appendChild(b),c.appendChild(a),c.className="running",c.id=this.id="qunit-test-output"+X++,d.appendChild(c))},setup:function(){this.module!==d.previousModule?(d.previousModule&&t("moduleDone",e,{name:d.previousModule,failed:d.moduleStats.bad,passed:d.moduleStats.all-d.moduleStats.bad,total:d.moduleStats.all}),d.previousModule=this.module,d.moduleStats={all:0,bad:0},t("moduleStart",e,{name:this.module})):d.autorun&&t("moduleStart",e,{name:this.module});d.current=this;this.testEnvironment=r({setup:function(){},teardown:function(){}},this.moduleTestEnvironment);this.started=+new s;t("testStart",e,{name:this.testName,module:this.module});e.current_testEnvironment=this.testEnvironment;d.pollution||P();if(d.notrycatch)this.testEnvironment.setup.call(this.testEnvironment);else try{this.testEnvironment.setup.call(this.testEnvironment)}catch(a){e.pushFailure("Setup failed on "+this.testName+": "+(a.message||a),I(a,1))}},run:function(){d.current=this;var a=p("qunit-testresult");a&&(a.innerHTML="\u5b9f\u884c\u4e2d...<br/> "+this.nameHtml);this.async&&e.stop();this.callbackStarted=+new s;if(d.notrycatch)this.callback.call(this.testEnvironment,e.assert),this.callbackRuntime=+new s-this.callbackStarted;else try{this.callback.call(this.testEnvironment,e.assert),this.callbackRuntime=+new s-this.callbackStarted}catch(b){this.callbackRuntime=+new s-this.callbackStarted,e.pushFailure("\u30c6\u30b9\u30c8\u4e2d\u306b\u6b7b\u4ea1\u4e8b\u6545\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002 #"+(this.assertions.length+1)+" "+this.stack+": "+(b.message||b),I(b,0)),P(),d.blocking&&e.start()}},teardown:function(){d.current=this;if(d.notrycatch)"undefined"===typeof this.callbackRuntime&&(this.callbackRuntime=+new s-this.callbackStarted),this.testEnvironment.teardown.call(this.testEnvironment);else{try{this.testEnvironment.teardown.call(this.testEnvironment)}catch(a){e.pushFailure("Teardown failed on "+this.testName+": "+(a.message||a),I(a,1))}var b,c=d.pollution;P();b=T(d.pollution,c);0<b.length&&e.pushFailure("Introduced global variable(s): "+b.join(", "));b=T(c,d.pollution);0<b.length&&e.pushFailure("Deleted global variable(s): "+b.join(", "))}},finish:function(){d.current=this;d.requireExpects&&null===this.expected?e.pushFailure("Expected number of assertions to be defined, but expect() was not called.",this.stack):null!==this.expected&&this.expected!==this.assertions.length?e.pushFailure("Expected "+this.expected+" assertions, but "+this.assertions.length+" were run",this.stack):null===this.expected&&!this.assertions.length&&e.pushFailure("Expected at least one assertion, but none were run - call expect(0) to accept zero assertions.",this.stack);var a,b,c,j,g,f,h=this,k=c=0;g=p("qunit-tests");this.runtime=+new s-this.started;d.stats.all+=this.assertions.length;d.moduleStats.all+=this.assertions.length;if(g){f=document.createElement("ol");f.className="qunit-assert-list";for(a=0;a<this.assertions.length;a++)b=this.assertions[a],g=document.createElement("li"),g.className=b.result?"pass":"fail",g.innerHTML=b.message||(b.result?"okay":"failed"),f.appendChild(g),b.result?c++:(k++,d.stats.bad++,d.moduleStats.bad++);e.config.reorder&&w.sessionStorage&&(k?sessionStorage.setItem("qunit-test-"+this.module+"-"+this.testName,k):sessionStorage.removeItem("qunit-test-"+this.module+"-"+this.testName));0===k&&U(f,"qunit-collapsed");j=document.createElement("strong");j.innerHTML=this.nameHtml+" <b class='counts'>(<b class='failed'>"+k+"</b>, <b class='passed'>"+c+"</b>, "+this.assertions.length+")</b>";z(j,"click",function(){var a=j.parentNode.lastChild;(-1<(" "+a.className+" ").indexOf(" qunit-collapsed ")?W:U)(a,"qunit-collapsed")});z(j,"dblclick",function(a){a=a&&a.target?a.target:l.event.srcElement;if("span"===a.nodeName.toLowerCase()||"b"===a.nodeName.toLowerCase())a=a.parentNode;l.location&&"strong"===a.nodeName.toLowerCase()&&(l.location=e.url({testNumber:h.testNumber}))});a=document.createElement("span");a.className="runtime";a.innerHTML=this.runtime+" \u30df\u30ea\u79d2";g=p(this.id);g.className=k?"fail":"pass";g.removeChild(g.firstChild);c=g.firstChild;g.appendChild(j);g.appendChild(c);g.appendChild(a);g.appendChild(f)}else for(a=0;a<this.assertions.length;a++)this.assertions[a].result||(k++,d.stats.bad++,d.moduleStats.bad++);t("testDone",e,{name:this.testName,module:this.module,failed:k,passed:this.assertions.length-k,total:this.assertions.length,duration:this.runtime});e.reset();d.current=void 0},queue:function(){function a(){B(function(){b.setup()});B(function(){b.run()});B(function(){b.teardown()});B(function(){b.finish()})}var b=this;B(function(){b.init()});e.config.reorder&&w.sessionStorage&&+sessionStorage.getItem("qunit-test-"+this.module+"-"+this.testName)?a():B(a,!0)}};e={module:function(a,b){d.currentModule=a;d.currentModuleTestEnvironment=b;d.modules[a]=!0},asyncTest:function(a,b,c){2===arguments.length&&(c=b,b=null);e.test(a,b,c,!0)},test:function(a,b,c,e){var g;g="<span class='test-name'>"+n(a)+"</span>";2===arguments.length&&(c=b,b=null);d.currentModule&&(g="<span class='module-name'>"+n(d.currentModule)+"</span>: "+g);g=new H({nameHtml:g,testName:a,expected:b,async:e,callback:c,module:d.currentModule,moduleTestEnvironment:d.currentModuleTestEnvironment,stack:v(2)});O(g)&&g.queue()},expect:function(a){if(1===arguments.length)d.current.expected=a;else return d.current.expected},start:function(a){void 0===d.semaphore?e.begin(function(){setTimeout(function(){e.start(a)})}):(d.semaphore-=a||1,0<d.semaphore||(0>d.semaphore?(d.semaphore=0,e.pushFailure("Called start() while already started (QUnit.config.semaphore was 0 already)",null,v(2))):w.setTimeout?l.setTimeout(function(){0<d.semaphore||(d.timeout&&clearTimeout(d.timeout),d.blocking=!1,J(!0))},13):(d.blocking=!1,J(!0))))},stop:function(a){d.semaphore+=a||1;d.blocking=!0;d.testTimeout&&w.setTimeout&&(clearTimeout(d.timeout),d.timeout=l.setTimeout(function(){e.ok(!1,"Test timed out");d.semaphore=1;e.start()},d.testTimeout))}};m={ok:function(a,b){if(!d.current)throw Error("ok() assertion outside test context, was "+v(2));a=!!a;var c,j={module:d.current.module,name:d.current.testName,result:a,message:b};b=n(b||(a?"okay":"failed"));b="<span class='test-message'>"+b+"</span>";if(!a&&(c=v(2)))j.source=c,b+="<table><tr class='test-source'><th>\u30bd\u30fc\u30b9: </th><td><pre>"+n(c)+"</pre></td></tr></table>";t("log",e,j);d.current.assertions.push({result:a,message:b})},equal:function(a,b,c){e.push(b==a,a,b,c)},notEqual:function(a,b,c){e.push(b!=a,a,b,c)},propEqual:function(a,b,c){a=D(a);b=D(b);e.push(e.equiv(a,b),a,b,c)},notPropEqual:function(a,b,c){a=D(a);b=D(b);e.push(!e.equiv(a,b),a,b,c)},deepEqual:function(a,b,c){e.push(e.equiv(a,b),a,b,c)},notDeepEqual:function(a,b,c){e.push(!e.equiv(a,b),a,b,c)},strictEqual:function(a,b,c){e.push(b===a,a,b,c)},notStrictEqual:function(a,b,c){e.push(b!==a,a,b,c)},"throws":function(a,b,c){var j,g=b,f=!1;"string"===typeof b&&(c=b,b=null);d.current.ignoreGlobalErrors=!0;try{a.call(d.current.testEnvironment)}catch(h){j=h}d.current.ignoreGlobalErrors=!1;j?(b?"regexp"===e.objectType(b)?f=b.test(Y(j)):j instanceof b?f=!0:!0===b.call({},j)&&(g=null,f=!0):(f=!0,g=null),e.push(f,j,g,c)):e.pushFailure(c,null,"No exception was thrown.")}};r(e,m);e.raises=m["throws"];e.equals=function(){e.push(!1,!1,!1,"QUnit.equals has been deprecated since 2009 (e88049a0), use QUnit.equal instead")};e.same=function(){e.push(!1,!1,!1,"QUnit.same has been deprecated since 2009 (e88049a0), use QUnit.deepEqual instead")};q=function(){};q.prototype=e;e=new q;e.constructor=q;d={queue:[],blocking:!0,hidepassed:!1,reorder:!0,altertitle:!0,requireExpects:!1,urlConfig:[{id:"noglobals",label:"Check for Globals",tooltip:"Enabling this will test if any test introduces new properties on the `window` object. Stored as query-strings."},{id:"notrycatch",label:"try-catch\u3092\u3057\u306a\u3044",tooltip:"Enabling this will run tests outside of a try-catch block. Makes debugging exceptions in IE reasonable. Stored as query-strings."}],modules:{},begin:[],done:[],log:[],testStart:[],testDone:[],moduleStart:[],moduleDone:[]};"undefined"===typeof exports&&(r(l,e),l.QUnit=e);var C=l.location||{search:"",protocol:"file:"},R=C.search.slice(1).split("&"),Z=R.length,E={},x;if(R[0])for(q=0;q<Z;q++)x=R[q].split("="),x[0]=decodeURIComponent(x[0]),x[1]=x[1]?decodeURIComponent(x[1]):!0,E[x[0]]=x[1];e.urlParams=E;d.filter=E.filter;d.module=E.module;d.testNumber=parseInt(E.testNumber,10)||null;e.isLocal="file:"===C.protocol;r(e,{assert:m,config:d,init:function(){r(d,{stats:{all:0,bad:0},moduleStats:{all:0,bad:0},started:+new s,updateRate:1E3,blocking:!1,autostart:!0,autorun:!1,filter:"",queue:[],semaphore:1});var a,b,c;if(a=p("qunit"))a.innerHTML="<h1 id='qunit-header'>"+n(document.title)+"</h1><h2 id='qunit-banner'></h2><div id='qunit-testrunner-toolbar'></div><h2 id='qunit-userAgent'></h2><ol id='qunit-tests'></ol>";a=p("qunit-tests");b=p("qunit-banner");c=p("qunit-testresult");a&&(a.innerHTML="");b&&(b.className="");c&&c.parentNode.removeChild(c);a&&(c=document.createElement("p"),c.id="qunit-testresult",c.className="result",a.parentNode.insertBefore(c,a),c.innerHTML="Running...<br/>&nbsp;")},reset:function(){var a=p("qunit-fixture");a&&(a.innerHTML=d.fixture)},triggerEvent:function(a,b,c){document.createEvent?(c=document.createEvent("MouseEvents"),c.initMouseEvent(b,!0,!0,a.ownerDocument.defaultView,0,0,0,0,0,!1,!1,!1,!1,0,null),a.dispatchEvent(c)):a.fireEvent&&a.fireEvent("on"+b)},is:function(a,b){return e.objectType(b)===a},objectType:function(a){if("undefined"===typeof a)return"undefined";if(null===a)return"null";var b=V.call(a).match(/^\[object\s(.*)\]$/),b=b&&b[1]||"";switch(b){case "Number":return isNaN(a)?"nan":"number";case "String":case "Boolean":case "Array":case "Date":case "RegExp":case "Function":return b.toLowerCase()}if("object"===typeof a)return"object"},push:function(a,b,c,j){if(!d.current)throw Error("assertion outside test context, was "+v());var g={module:d.current.module,name:d.current.testName,result:a,message:j,actual:b,expected:c};j=n(j)||(a?"okay":"failed");j="<span class='test-message'>"+j+"</span>";if(!a){c=n(e.jsDump.parse(c));b=n(e.jsDump.parse(b));j+="<table><tr class='test-expected'><th>\u4e88\u60f3: </th><td><pre>"+c+"</pre></td></tr>";b!==c&&(j=j+("<tr class='test-actual'><th>\u7d50\u679c: </th><td><pre>"+b+"</pre></td></tr>")+("<tr class='test-diff'><th>\u9055\u3044: </th><td><pre>"+e.diff(c,b)+"</pre></td></tr>"));if(b=v())g.source=b,j+="<tr class='test-source'><th>Source: </th><td><pre>"+n(b)+"</pre></td></tr>";j+="</table>"}t("log",e,g);d.current.assertions.push({result:!!a,message:j})},pushFailure:function(a,b,c){if(!d.current)throw Error("pushFailure() assertion outside test context, was "+v(2));var j={module:d.current.module,name:d.current.testName,result:!1,message:a};a=n(a)||"error";a="<span class='test-message'>"+a+"</span>";a+="<table>";c&&(a+="<tr class='test-actual'><th>Result: </th><td><pre>"+n(c)+"</pre></td></tr>");b&&(j.source=b,a+="<tr class='test-source'><th>Source: </th><td><pre>"+n(b)+"</pre></td></tr>");a+="</table>";t("log",e,j);d.current.assertions.push({result:!1,message:a})},url:function(a){a=r(r({},e.urlParams),a);var b,c="?";for(b in a)y.call(a,b)&&(c+=encodeURIComponent(b)+"="+encodeURIComponent(a[b])+"&");return l.location.protocol+"//"+l.location.host+l.location.pathname+c.slice(0,-1)},extend:r,id:p,addEvent:z});r(e.constructor.prototype,{begin:A("begin"),done:A("done"),log:A("log"),testStart:A("testStart"),testDone:A("testDone"),moduleStart:A("moduleStart"),moduleDone:A("moduleDone")});if("undefined"===typeof document||"complete"===document.readyState)d.autorun=!0;e.load=function(){t("begin",e,{});var a,b,c,j,g,f,h;j=0;var k="";f="";a=r({},d);e.init();r(d,a);d.blocking=!1;c=d.urlConfig.length;for(a=0;a<c;a++)g=d.urlConfig[a],"string"===typeof g&&(g={id:g,label:g,tooltip:"[no tooltip available]"}),d[g.id]=e.urlParams[g.id],f+="<input id='qunit-urlconfig-"+n(g.id)+"' name='"+n(g.id)+"' type='checkbox'"+(d[g.id]?" checked='checked'":"")+" title='"+n(g.tooltip)+"'><label for='qunit-urlconfig-"+n(g.id)+"' title='"+n(g.tooltip)+"'>"+g.label+"</label>";k+="<label for='qunit-modulefilter'>Module: </label><select id='qunit-modulefilter' name='modulefilter'><option value='' "+(void 0===d.module?"selected='selected'":"")+">< All Modules ></option>";for(a in d.modules)d.modules.hasOwnProperty(a)&&(j+=1,k+="<option value='"+n(encodeURIComponent(a))+"' "+(d.module===a?"selected='selected'":"")+">"+n(a)+"</option>");k+="</select>";if(a=p("qunit-userAgent"))a.innerHTML=navigator.userAgent;if(a=p("qunit-header"))a.innerHTML="<a href='"+e.url({filter:void 0,module:void 0,testNumber:void 0})+"'>"+a.innerHTML+"</a> ";if(a=p("qunit-testrunner-toolbar")){b=document.createElement("input");b.type="checkbox";b.id="qunit-filter-pass";z(b,"click",function(){var a,c=document.getElementById("qunit-tests");b.checked?c.className+=" hidepass":(a=" "+c.className.replace(/[\n\t\r]/g," ")+" ",c.className=a.replace(/ hidepass /," "));w.sessionStorage&&(b.checked?sessionStorage.setItem("qunit-filter-passed-tests","true"):sessionStorage.removeItem("qunit-filter-passed-tests"))});if(d.hidepassed||w.sessionStorage&&sessionStorage.getItem("qunit-filter-passed-tests"))b.checked=!0,c=document.getElementById("qunit-tests"),c.className+=" hidepass";a.appendChild(b);c=document.createElement("label");c.setAttribute("for","qunit-filter-pass");c.setAttribute("title","Only show tests and assertons that fail. Stored in sessionStorage.");c.innerHTML="\u6210\u529f\u3057\u305f\u30c6\u30b9\u30c8\u3092\u975e\u8868\u793a\u306b\u3059\u308b";a.appendChild(c);c=document.createElement("span");c.innerHTML=f;f=c.getElementsByTagName("input");g=function(a){var b={};a=a.target||a.srcElement;b[a.name]=a.checked?!0:void 0;l.location=e.url(b)};for(var m=f.length;m--;)z(f[m],"click",g);a.appendChild(c);1<j&&(h=document.createElement("span"),h.setAttribute("id","qunit-modulefilter-container"),h.innerHTML=k,z(h.lastChild,"change",function(){var a=h.getElementsByTagName("select")[0],a=decodeURIComponent(a.options[a.selectedIndex].value);l.location=e.url({module:""===a?void 0:a})}),a.appendChild(h))}if(j=p("qunit-fixture"))d.fixture=j.innerHTML;d.autostart&&e.start()};z(l,"load",e.load);Q=l.onerror;l.onerror=function(a,b,c){var d=!1;Q&&(d=Q(a,b,c));if(!0!==d){if(e.config.current){if(e.config.current.ignoreGlobalErrors)return!0;e.pushFailure(a,b+":"+c)}else e.test("global failure",r(function(){e.pushFailure(a,b+":"+c)},{validTest:O}));return!1}return d};var F,K=[],u=[],L=Object.getPrototypeOf||function(a){return a.__proto__},G;m=function(a,b){return a instanceof b.constructor||b instanceof a.constructor?b==a:b===a};G={string:m,"boolean":m,number:m,"null":m,undefined:m,nan:function(a){return isNaN(a)},date:function(a,b){return"date"===e.objectType(a)&&b.valueOf()===a.valueOf()},regexp:function(a,b){return"regexp"===e.objectType(a)&&b.source===a.source&&b.global===a.global&&b.ignoreCase===a.ignoreCase&&b.multiline===a.multiline&&b.sticky===a.sticky},"function":function(){var a=K[K.length-1];return a!==Object&&"undefined"!==typeof a},array:function(a,b){var c,d,g,f;if("array"!==e.objectType(a))return!1;g=b.length;if(g!==a.length)return!1;u.push(b);for(c=0;c<g;c++){f=!1;for(d=0;d<u.length;d++)u[d]===b[c]&&(f=!0);if(!f&&!F(b[c],a[c]))return u.pop(),!1}u.pop();return!0},object:function(a,b){var c,d,e,f=!0,h=[],k=[];if(b.constructor!==a.constructor&&!(null===L(b)&&L(a)===Object.prototype||null===L(a)&&L(b)===Object.prototype))return!1;K.push(b.constructor);u.push(b);for(c in b){e=!1;for(d=0;d<u.length;d++)u[d]===b[c]&&(e=!0);h.push(c);if(!e&&!F(b[c],a[c])){f=!1;break}}K.pop();u.pop();for(c in a)k.push(c);return f&&F(h.sort(),k.sort())}};F=function(){var a=[].slice.apply(arguments);if(2>a.length)a=!0;else{var b;if(a[0]===a[1])b=!0;else if(null===a[0]||null===a[1]||"undefined"===typeof a[0]||"undefined"===typeof a[1]||e.objectType(a[0])!==e.objectType(a[1]))b=!1;else{b=[a[1],a[0]];var c=e.objectType(a[0]);b=c?"function"===e.objectType(G[c])?G[c].apply(G,b):G[c]:void 0}a=b&&arguments.callee.apply(this,a.splice(1,a.length-1))}return a};e.equiv=F;m=function(a){return'"'+a.toString().replace(/"/g,'\\"')+'"'};q=function(a){return a+""};var N=function(a,b,c){var d=M.separator(),e=M.indent(),f=M.indent(1);b.join&&(b=b.join(","+d+f));return!b?a+c:[a,f+b,e+c].join(d)},C=function(a,b){var c=a.length,d=Array(c);for(this.up();c--;)d[c]=this.parse(a[c],void 0,b);this.down();return N("[",d,"]")},$=/^function (\w+)/,M={parse:function(a,b,c){c=c||[];var d,e=this.parsers[b||this.typeOf(a)];b=typeof e;a:if(d=c,d.indexOf)d=d.indexOf(a);else{for(var f=0,h=d.length;f<h;f++)if(d[f]===a){d=f;break a}d=-1}return-1!==d?"recursion("+(d-c.length)+")":"function"===b?(c.push(a),a=e.call(this,a,c),c.pop(),a):"string"===b?e:this.parsers.error},typeOf:function(a){return null===a?"null":"undefined"===typeof a?"undefined":e.is("regexp",a)?"regexp":e.is("date",a)?"date":e.is("function",a)?"function":void 0!==typeof a.setInterval&&"undefined"!==typeof a.document&&"undefined"===typeof a.nodeType?"window":9===a.nodeType?"document":a.nodeType?"node":"[object Array]"===V.call(a)||"number"===typeof a.length&&"undefined"!==typeof a.item&&(a.length?a.item(0)===a[0]:null===a.item(0)&&"undefined"===typeof a[0])?"array":a.constructor===Error.prototype.constructor?"error":typeof a},separator:function(){return this.multiline?this.HTML?"<br />":"\n":this.HTML?"&nbsp;":" "},indent:function(a){if(!this.multiline)return"";var b=this.indentChar;this.HTML&&(b=b.replace(/\t/g,"   ").replace(/ /g,"&nbsp;"));return Array(this._depth_+(a||0)).join(b)},up:function(a){this._depth_+=a||1},down:function(a){this._depth_-=a||1},setParser:function(a,b){this.parsers[a]=b},quote:m,literal:q,join:N,_depth_:1,parsers:{window:"[Window]",document:"[Document]",error:function(a){return'Error("'+a.message+'")'},unknown:"[Unknown]","null":"null",undefined:"undefined","function":function(a){var b="function",c="name"in a?a.name:($.exec(a)||[])[1];c&&(b+=" "+c);b=[b+"( ",e.jsDump.parse(a,"functionArgs"),"){"].join("");return N(b,e.jsDump.parse(a,"functionCode"),"}")},array:C,nodelist:C,arguments:C,object:function(a,b){var c=[],d,g,f,h;e.jsDump.up();d=[];for(g in a)d.push(g);d.sort();for(h=0;h<d.length;h++)g=d[h],f=a[g],c.push(e.jsDump.parse(g,"key")+": "+e.jsDump.parse(f,void 0,b));e.jsDump.down();return N("{",c,"}")},node:function(a){var b,c,d,g=e.jsDump.HTML?"&lt;":"<",f=e.jsDump.HTML?"&gt;":">",h=a.nodeName.toLowerCase(),k=g+h,l=a.attributes;if(l){c=0;for(b=l.length;c<b;c++)(d=l[c].nodeValue)&&"inherit"!==d&&(k+=" "+l[c].nodeName+"="+e.jsDump.parse(d,"attribute"))}k+=f;if(3===a.nodeType||4===a.nodeType)k+=a.nodeValue;return k+g+"/"+h+f},functionArgs:function(a){var b=a.length;if(!b)return"";for(a=Array(b);b--;)a[b]=String.fromCharCode(97+b);return" "+a.join(", ")+" "},key:m,functionCode:"[code]",attribute:m,string:m,date:m,regexp:q,number:q,"boolean":q},HTML:!1,indentChar:"  ",multiline:!0};e.jsDump=M;e.diff=function(a,b){a=a.replace(/\s+$/,"");b=b.replace(/\s+$/,"");var c,d,e="",f=""===a?[]:a.split(/\s+/),h=""===b?[]:b.split(/\s+/);d={};var k={};for(c=0;c<h.length;c++)y.call(d,h[c])||(d[h[c]]={rows:[],o:null}),d[h[c]].rows.push(c);for(c=0;c<f.length;c++)y.call(k,f[c])||(k[f[c]]={rows:[],n:null}),k[f[c]].rows.push(c);for(c in d)y.call(d,c)&&(1===d[c].rows.length&&y.call(k,c)&&1===k[c].rows.length)&&(h[d[c].rows[0]]={text:h[d[c].rows[0]],row:k[c].rows[0]},f[k[c].rows[0]]={text:f[k[c].rows[0]],row:d[c].rows[0]});for(c=0;c<h.length-1;c++)null!=h[c].text&&(null==h[c+1].text&&h[c].row+1<f.length&&null==f[h[c].row+1].text&&h[c+1]==f[h[c].row+1])&&(h[c+1]={text:h[c+1],row:h[c].row+1},f[h[c].row+1]={text:f[h[c].row+1],row:c+1});for(c=h.length-1;0<c;c--)null!=h[c].text&&(null==h[c-1].text&&0<h[c].row&&null==f[h[c].row-1].text&&h[c-1]==f[h[c].row-1])&&(h[c-1]={text:h[c-1],row:h[c].row-1},f[h[c].row-1]={text:f[h[c].row-1],row:c-1});var k=a.match(/\s+/g),l=b.match(/\s+/g);null==k?k=[" "]:k.push(" ");null==l?l=[" "]:l.push(" ");if(0===h.length)for(c=0;c<f.length;c++)e+="<del>"+f[c]+k[c]+"</del>";else{if(null==h[0].text)for(b=0;b<f.length&&null==f[b].text;b++)e+="<del>"+f[b]+k[b]+"</del>";for(c=0;c<h.length;c++)if(null==h[c].text)e+="<ins>"+h[c]+l[c]+"</ins>";else{d="";for(b=h[c].row+1;b<f.length&&null==f[b].text;b++)d+="<del>"+f[b]+k[b]+"</del>";e+=" "+h[c].text+l[c]+d}}return e};"undefined"!==typeof exports&&r(exports,e)})(this);