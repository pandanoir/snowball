/**
QUnit v1.11.0pre - A JavaScript Unit Testing Framework
http://qunitjs.com
Copyright 2012 jQuery Foundation and other contributors
Released under the MIT license.
http://jquery.org/license*/
(function(m){function G(a){r(this,a);this.assertions=[];this.testNumber=++G.count}function P(a){var c=d.filter&&d.filter.toLowerCase(),b=d.module&&d.module.toLowerCase(),j=(a.module+": "+a.testName).toLowerCase();if(a.callback&&a.callback.validTest===P)return delete a.callback.validTest,!0;if(d.testNumber)return a.testNumber===d.testNumber;if(b&&(!a.module||a.module.toLowerCase()!==b))return!1;if(!c)return!0;(a="!"!==c.charAt(0))||(c=c.slice(1));return-1!==j.indexOf(c)?a:!a}function H(a,c){c=void 0===c?3:c;var b,d,e;if(a.stacktrace)return a.stacktrace.split("\n")[c+3];if(a.stack){b=a.stack.split("\n");/^error$/i.test(b[0])&&b.shift();if(T){d=[];for(e=c;e<b.length&&-1===b[e].indexOf(T);e++)d.push(b[e]);if(d.length)return d.join("\n")}return b[c]}if(a.sourceURL&&!/qunit.js$/.test(a.sourceURL))return a.sourceURL+":"+a.line}function v(a){try{throw Error();}catch(c){return H(c,a)}}function n(a){return!a?"":(a+"").replace(/['"<>&]/g,function(a){switch(a){case "'":return"'";case '"':return'"';case "<":return"<";case ">":return">";case "&":return"&"}})}function z(a,c){d.queue.push(a);d.autorun&&!d.blocking&&I(c)}function I(a){function c(){I(a)}var b=(new s).getTime();for(d.depth=d.depth?d.depth+1:1;d.queue.length&&!d.blocking;)if(!w.setTimeout||0>=d.updateRate||(new s).getTime()-b<d.updateRate)d.queue.shift()();else{m.setTimeout(c,13);break}d.depth--;if(a&&!d.blocking&&!d.queue.length&&0===d.depth){d.autorun=!0;d.currentModule&&t("moduleDone",e,{name:d.currentModule,failed:d.moduleStats.bad,passed:d.moduleStats.all-d.moduleStats.bad,total:d.moduleStats.all});var j,h;j=p("qunit-banner");h=p("qunit-tests");var b=+new s-d.started,f=d.stats.all-d.stats.bad,g=f==d.stats.all?["\u30c6\u30b9\u30c8\u306f ",b," \u30df\u30ea\u79d2\u3067\u5b8c\u4e86\u3057\u307e\u3057\u305f.<br/><span class='passed'>",f,"</span> \u30c6\u30b9\u30c8\u3059\u3079\u3066\u6210\u529f\u3067\u3057\u305f. <span class='total'></span><span class='failed'></span>"].join(""):["\u30c6\u30b9\u30c8\u306f ",b," \u30df\u30ea\u79d2\u3067\u5b8c\u4e86\u3057\u307e\u3057\u305f.<br/><span class='passed'>",d.stats.all,"</span> \u30c6\u30b9\u30c8\u306e\u3046\u3061 <span class='total'>",f,"</span> \u500b \u6210\u529f, <span class='failed'>",d.stats.bad,"</span> \u500b \u5931\u6557\u3057\u307e\u3057\u305f."].join("");j&&(j.className=d.stats.bad?"qunit-fail":"qunit-pass");h&&(p("qunit-testresult").innerHTML=g);d.altertitle&&"undefined"!==typeof document&&document.title&&(document.title=[d.stats.bad?"\u2716":"\u2714",document.title.replace(/^[\u2714\u2716] /i,"")].join(" "));if(d.reorder&&w.sessionStorage&&0===d.stats.bad)for(j=0;j<sessionStorage.length;j++)h=sessionStorage.key(j++),0===h.indexOf("qunit-test-")&&sessionStorage.removeItem(h);m.scrollTo&&m.scrollTo(0,0);t("done",e,{failed:d.stats.bad,passed:f,total:d.stats.all,runtime:b})}}function Q(){d.pollution=[];if(d.noglobals)for(var a in m)J.call(m,a)&&!/^qunit-test-output/.test(a)&&d.pollution.push(a)}function U(a,c){var b,d,e=a.slice();for(b=0;b<e.length;b++)for(d=0;d<c.length;d++)if(e[b]===c[d]){e.splice(b,1);b--;break}return e}function r(a,c){for(var b in c)if(void 0===c[b])delete a[b];else if("constructor"!==b||a!==m)a[b]=c[b];return a}function A(a,c,b){a.addEventListener?a.addEventListener(c,b,!1):a.attachEvent?a.attachEvent("on"+c,b):b()}function V(a,c){-1<(" "+a.className+" ").indexOf(" "+c+" ")||(a.className+=(a.className?" ":"")+c)}function X(a,c){for(var b=" "+a.className+" ";-1<b.indexOf(" "+c+" ");)b=b.replace(" "+c+" "," ");a.className=m.jQuery?jQuery.trim(b):b.trim?b.trim():b}function p(a){return!!("undefined"!==typeof document&&document&&document.getElementById)&&document.getElementById(a)}function y(a){return function(c){d[a].push(c)}}function t(a,c,b){var j;if(e.hasOwnProperty(a))e[a].call(c,b);else{j=d[a];for(a=0;a<j.length;a++)j[a].call(c,b)}}function K(a){return a.replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/&"/g,"&amp;")}var e,k,d,R,Y=0,T=(v(0)||"").replace(/(:\d+)+\)?/,"").replace(/.+\//,""),W=Object.prototype.toString,J=Object.prototype.hasOwnProperty,s=m.Date;k="undefined"!==typeof m.setTimeout;var q;try{sessionStorage.setItem("qunit-test-string","qunit-test-string"),sessionStorage.removeItem("qunit-test-string"),q=!0}catch(aa){q=!1}var w={setTimeout:k,sessionStorage:q},C=function(a){var c,b,d=e.is("array",a)?[]:{};for(c in a)J.call(a,c)&&(b=a[c],d[c]=b===Object(b)?C(b):b);return d};G.count=0;G.prototype={init:function(){var a,c,b,d=p("qunit-tests");d&&(c=document.createElement("strong"),c.innerHTML=this.nameHtml,a=document.createElement("a"),a.innerHTML="\u518d\u5b9f\u884c",a.href=e.url({testNumber:this.testNumber}),b=document.createElement("li"),b.appendChild(c),b.appendChild(a),b.className="running",b.id=this.id="qunit-test-output"+Y++,d.appendChild(b))},setup:function(){this.module!==d.previousModule?(d.previousModule&&t("moduleDone",e,{name:d.previousModule,failed:d.moduleStats.bad,passed:d.moduleStats.all-d.moduleStats.bad,total:d.moduleStats.all}),d.previousModule=this.module,d.moduleStats={all:0,bad:0},t("moduleStart",e,{name:this.module})):d.autorun&&t("moduleStart",e,{name:this.module});d.current=this;this.testEnvironment=r({setup:function(){},teardown:function(){}},this.moduleTestEnvironment);this.started=+new s;t("testStart",e,{name:this.testName,module:this.module});e.current_testEnvironment=this.testEnvironment;d.pollution||Q();if(d.notrycatch)this.testEnvironment.setup.call(this.testEnvironment);else try{this.testEnvironment.setup.call(this.testEnvironment)}catch(a){e.pushFailure("Setup failed on "+this.testName+": "+(a.message||a),H(a,1))}},run:function(){d.current=this;var a=p("qunit-testresult");a&&(a.innerHTML="\u5b9f\u884c\u4e2d: <br/>"+this.nameHtml);this.async&&e.stop();this.callbackStarted=+new s;if(d.notrycatch)this.callback.call(this.testEnvironment,e.assert),this.callbackRuntime=+new s-this.callbackStarted;else try{this.callback.call(this.testEnvironment,e.assert),this.callbackRuntime=+new s-this.callbackStarted}catch(c){this.callbackRuntime=+new s-this.callbackStarted,e.pushFailure("\u30c6\u30b9\u30c8\u4e2d\u306b\u6b7b\u4ea1\u4e8b\u6545\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002 #"+(this.assertions.length+1)+" "+this.stack+": "+(c.message||c),H(c,0)),Q(),d.blocking&&e.start()}},teardown:function(){d.current=this;if(d.notrycatch)"undefined"===typeof this.callbackRuntime&&(this.callbackRuntime=+new s-this.callbackStarted),this.testEnvironment.teardown.call(this.testEnvironment);else{try{this.testEnvironment.teardown.call(this.testEnvironment)}catch(a){e.pushFailure("Teardown failed on "+this.testName+": "+(a.message||a),H(a,1))}var c,b=d.pollution;Q();c=U(d.pollution,b);0<c.length&&e.pushFailure("Introduced global variable(s): "+c.join(", "));c=U(b,d.pollution);0<c.length&&e.pushFailure("Deleted global variable(s): "+c.join(", "))}},finish:function(){d.current=this;d.requireExpects&&null===this.expected?e.pushFailure("Expected number of assertions to be defined, but expect() was not called.",this.stack):null!==this.expected&&this.expected!==this.assertions.length?e.pushFailure("Expected "+this.expected+" assertions, but "+this.assertions.length+" were run",this.stack):null===this.expected&&!this.assertions.length&&e.pushFailure("1\u3064\u3082\u30c6\u30b9\u30c8\u304c\u3042\u308a\u307e\u305b\u3093\u3002",this.stack);var a,c,b,j,h,f,g=b=0;h=p("qunit-tests");this.runtime=+new s-this.started;d.stats.all+=this.assertions.length;d.moduleStats.all+=this.assertions.length;if(h){f=document.createElement("ol");f.className="qunit-assert-list";for(a=0;a<this.assertions.length;a++)c=this.assertions[a],h=document.createElement("li"),h.className=c.result?"pass":"fail",h.innerHTML=c.message||(c.result?"okay":"failed"),f.appendChild(h),c.result?b++:(g++,d.stats.bad++,d.moduleStats.bad++);e.config.reorder&&w.sessionStorage&&(g?sessionStorage.setItem("qunit-test-"+this.module+"-"+this.testName,g):sessionStorage.removeItem("qunit-test-"+this.module+"-"+this.testName));0===g&&V(f,"qunit-collapsed");j=document.createElement("strong");j.innerHTML=this.nameHtml+" <b class='counts'>(<b class='failed'>"+g+"</b>, <b class='passed'>"+b+"</b>, "+this.assertions.length+")</b>";A(j,"click",function(){var a=j.parentNode.lastChild;(-1<(" "+a.className+" ").indexOf(" qunit-collapsed ")?X:V)(a,"qunit-collapsed")});a=document.createElement("span");a.className="runtime";a.innerHTML=this.runtime+" ms";h=p(this.id);h.className=g?"fail":"pass";h.removeChild(h.firstChild);b=h.firstChild;h.appendChild(j);h.appendChild(b);h.appendChild(a);h.appendChild(f)}else for(a=0;a<this.assertions.length;a++)this.assertions[a].result||(g++,d.stats.bad++,d.moduleStats.bad++);t("testDone",e,{name:this.testName,module:this.module,failed:g,passed:this.assertions.length-g,total:this.assertions.length,duration:this.runtime});e.reset();d.current=void 0},queue:function(){function a(){z(function(){c.setup()});z(function(){c.run()});z(function(){c.teardown()});z(function(){c.finish()})}var c=this;z(function(){c.init()});e.config.reorder&&w.sessionStorage&&+sessionStorage.getItem("qunit-test-"+this.module+"-"+this.testName)?a():z(a,!0)}};e={module:function(a,c){d.currentModule=a;d.currentModuleTestEnvironment=c;d.modules[a]=!0},asyncTest:function(a,c,b){2===arguments.length&&(b=c,c=null);e.test(a,c,b,!0)},test:function(a,c,b,e){var h;h="<span class='test-name'>"+n(a)+"</span>";2===arguments.length&&(b=c,c=null);d.currentModule&&(h="<span class='module-name'>"+n(d.currentModule)+"</span>: "+h);h=new G({nameHtml:h,testName:a,expected:c,async:e,callback:b,module:d.currentModule,moduleTestEnvironment:d.currentModuleTestEnvironment,stack:v(2)});P(h)&&h.queue()},expect:function(a){if(1===arguments.length)d.current.expected=a;else return d.current.expected},start:function(a){void 0===d.semaphore?e.begin(function(){setTimeout(function(){e.start(a)})}):(d.semaphore-=a||1,0<d.semaphore||(0>d.semaphore?(d.semaphore=0,e.pushFailure("start()\u306f\u3082\u3046\u3059\u3067\u306b\u547c\u3070\u308c\u3066\u3044\u307e\u3059\u3002(QUnit.config.semaphore was 0 already)",null,v(2))):w.setTimeout?m.setTimeout(function(){0<d.semaphore||(d.timeout&&clearTimeout(d.timeout),d.blocking=!1,I(!0))},13):(d.blocking=!1,I(!0))))},stop:function(a){d.semaphore+=a||1;d.blocking=!0;d.testTimeout&&w.setTimeout&&(clearTimeout(d.timeout),d.timeout=m.setTimeout(function(){e.ok(!1,"Test timed out");d.semaphore=1;e.start()},d.testTimeout))}};k={ok:function(a,c){if(!d.current)throw Error("ok() assertion outside test context, was "+v(2));a=!!a;var b,j={module:d.current.module,name:d.current.testName,result:a,message:c};c=n(c||(a?"okay":"failed"));c="<span class='test-message'>"+c+"</span>";if(!a&&(b=v(2)))j.source=b,c+="<table><tr class='test-source'><th>\u30bd\u30fc\u30b9: </th><td><pre>"+n(b)+"</pre></td></tr></table>";t("log",e,j);d.current.assertions.push({result:a,message:c})},equal:function(a,c,b){e.push(c==a,a,c,b)},notEqual:function(a,c,b){e.push(c!=a,a,c,b)},propEqual:function(a,c,b){a=C(a);c=C(c);e.push(e.equiv(a,c),a,c,b)},notPropEqual:function(a,c,b){a=C(a);c=C(c);e.push(!e.equiv(a,c),a,c,b)},deepEqual:function(a,c,b){e.push(e.equiv(a,c),a,c,b)},notDeepEqual:function(a,c,b){e.push(!e.equiv(a,c),a,c,b)},strictEqual:function(a,c,b){e.push(c===a,a,c,b)},notStrictEqual:function(a,c,b){e.push(c!==a,a,c,b)},"throws":function(a,c,b){var j,h=c,f=!1;"string"===typeof c&&(b=c,c=null);d.current.ignoreGlobalErrors=!0;try{a.call(d.current.testEnvironment)}catch(g){j=g}d.current.ignoreGlobalErrors=!1;j?(c?"regexp"===e.objectType(c)?f=c.test(j):j instanceof c?f=!0:!0===c.call({},j)&&(h=null,f=!0):(f=!0,h=null),e.push(f,j,h,b)):e.pushFailure(b,null,"No exception was thrown.")}};r(e,k);e.raises=k["throws"];e.equals=function(){e.push(!1,!1,!1,"QUnit.equals \u306f 2009\u5e74\u304b\u3089\u975e\u63a8\u5968\u3068\u306a\u308a\u307e\u3057\u305f\u3002 (e88049a0), \u4ee3\u308f\u308a\u306bQUnit.equal\u3092\u4f7f\u3063\u3066\u304f\u3060\u3055\u3044")};e.same=function(){e.push(!1,!1,!1,"QUnit.same\u306f2009\u5e74\u304b\u3089\u975e\u63a8\u5968\u3068\u306a\u308a\u307e\u3057\u305f\u3002 (e88049a0), \u4ee3\u308f\u308a\u306bQUnit.deepEqual\u3092\u4f7f\u3063\u3066\u304f\u3060\u3055\u3044\u3002")};q=function(){};q.prototype=e;e=new q;e.constructor=q;d={queue:[],blocking:!0,hidepassed:!1,reorder:!0,altertitle:!0,requireExpects:!1,urlConfig:[{id:"noglobals",label:"Check for Globals",tooltip:"Enabling this will test if any test introduces new properties on the `window` object. Stored as query-strings."},{id:"notrycatch",label:"try-catch\u3092\u3057\u306a\u3044",tooltip:"Enabling this will run tests outside of a try-catch block. Makes debugging exceptions in IE reasonable. Stored as query-strings."}],modules:{},begin:[],done:[],log:[],testStart:[],testDone:[],moduleStart:[],moduleDone:[]};"undefined"===typeof exports&&(r(m,e),m.QUnit=e);var B=m.location||{search:"",protocol:"file:"},S=B.search.slice(1).split("&"),Z=S.length,D={},x;if(S[0])for(q=0;q<Z;q++)x=S[q].split("="),x[0]=decodeURIComponent(x[0]),x[1]=x[1]?decodeURIComponent(x[1]):!0,D[x[0]]=x[1];e.urlParams=D;d.filter=D.filter;d.module=D.module;d.testNumber=parseInt(D.testNumber,10)||null;e.isLocal="file:"===B.protocol;r(e,{assert:k,config:d,init:function(){r(d,{stats:{all:0,bad:0},moduleStats:{all:0,bad:0},started:+new s,updateRate:1E3,blocking:!1,autostart:!0,autorun:!1,filter:"",queue:[],semaphore:1});var a,c,b;if(a=p("qunit"))a.innerHTML="<h1 id='qunit-header'>"+n(document.title)+"</h1><h2 id='qunit-banner'></h2><div id='qunit-testrunner-toolbar'></div><h2 id='qunit-userAgent'></h2><ol id='qunit-tests'></ol>";a=p("qunit-tests");c=p("qunit-banner");b=p("qunit-testresult");a&&(a.innerHTML="");c&&(c.className="");b&&b.parentNode.removeChild(b);a&&(b=document.createElement("p"),b.id="qunit-testresult",b.className="result",a.parentNode.insertBefore(b,a),b.innerHTML="\u5b9f\u884c\u4e2d...<br/>\u00a0")},reset:function(){var a=p("qunit-fixture");a&&(a.innerHTML=d.fixture)},triggerEvent:function(a,c,b){document.createEvent?(b=document.createEvent("MouseEvents"),b.initMouseEvent(c,!0,!0,a.ownerDocument.defaultView,0,0,0,0,0,!1,!1,!1,!1,0,null),a.dispatchEvent(b)):a.fireEvent&&a.fireEvent("on"+c)},is:function(a,c){return e.objectType(c)===a},objectType:function(a){if("undefined"===typeof a)return"undefined";if(null===a)return"null";var c=W.call(a).match(/^\[object\s(.*)\]$/),c=c&&c[1]||"";switch(c){case "Number":return isNaN(a)?"nan":"number";case "String":case "Boolean":case "Array":case "Date":case "RegExp":case "Function":return c.toLowerCase()}if("object"===typeof a)return"object"},push:function(a,c,b,j){if(!d.current)throw Error("assertion outside test context, was "+v());var h={module:d.current.module,name:d.current.testName,result:a,message:j,actual:c,expected:b};j=n(j)||(a?"okay":"failed");j="<span class='test-message'>"+j+"</span>";if(!a){b=n(e.jsDump.parse(b));c=n(e.jsDump.parse(c));j+="<table><tr class='test-expected'><th>\u4e88\u60f3: </th><td><pre>"+K(b)+"</pre></td></tr>";c!==b&&(j=j+("<tr class='test-actual'><th>\u7d50\u679c: </th><td><pre>"+K(c)+"</pre></td></tr>")+("<tr class='test-diff'><th>\u9055\u3044: </th><td><pre>"+e.diff(b,c)+"</pre></td></tr>"));if(c=v())h.source=c,j+="<tr class='test-source'><th>\u30bd\u30fc\u30b9: </th><td><pre>"+n(c)+"</pre></td></tr>";j+="</table>"}t("log",e,h);d.current.assertions.push({result:!!a,message:j})},pushFailure:function(a,c,b){if(!d.current)throw Error("pushFailure() assertion outside test context, was "+v(2));var j={module:d.current.module,name:d.current.testName,result:!1,message:a};a=n(a)||"error";a="<span class='test-message'>"+a+"</span><table>";b&&(a+="<tr class='test-actual'><th>\u7d50\u679c: </th><td><pre>"+n(b)+"</pre></td></tr>");c&&(j.source=c,a+="<tr class='test-source'><th>\u30bd\u30fc\u30b9: </th><td><pre>"+n(c)+"</pre></td></tr>");a+="</table>";t("log",e,j);d.current.assertions.push({result:!1,message:a})},url:function(a){a=r(r({},e.urlParams),a);var c,b="?";for(c in a)J.call(a,c)&&(b+=encodeURIComponent(c)+"="+encodeURIComponent(a[c])+"&");return m.location.pathname+b.slice(0,-1)},extend:r,id:p,addEvent:A});r(e.constructor.prototype,{begin:y("begin"),done:y("done"),log:y("log"),testStart:y("testStart"),testDone:y("testDone"),moduleStart:y("moduleStart"),moduleDone:y("moduleDone")});if("undefined"===typeof document||"complete"===document.readyState)d.autorun=!0;e.load=function(){t("begin",e,{});var a,c,b,j,h,f,g;j=0;var l="";f="";a=r({},d);e.init();r(d,a);d.blocking=!1;b=d.urlConfig.length;for(a=0;a<b;a++)h=d.urlConfig[a],"string"===typeof h&&(h={id:h,label:h,tooltip:"[no tooltip available]"}),d[h.id]=e.urlParams[h.id],f+="<input id='qunit-urlconfig-"+n(h.id)+"' name='"+n(h.id)+"' type='checkbox'"+(d[h.id]?" checked='checked'":"")+" title='"+n(h.tooltip)+"'><label for='qunit-urlconfig-"+n(h.id)+"' title='"+n(h.tooltip)+"'>"+h.label+"</label>";l+="<label for='qunit-modulefilter'>Module: </label><select id='qunit-modulefilter' name='modulefilter'><option value='' "+(void 0===d.module?"selected='selected'":"")+">< All Modules ></option>";for(a in d.modules)d.modules.hasOwnProperty(a)&&(j+=1,l+="<option value='"+n(encodeURIComponent(a))+"' "+(d.module===a?"selected='selected'":"")+">"+n(a)+"</option>");l+="</select>";if(a=p("qunit-userAgent"))a.innerHTML=navigator.userAgent;if(a=p("qunit-header"))a.innerHTML="<a href='"+e.url({filter:void 0,module:void 0,testNumber:void 0})+"'>"+a.innerHTML+"</a> ";if(a=p("qunit-testrunner-toolbar")){c=document.createElement("input");c.type="checkbox";c.id="qunit-filter-pass";A(c,"click",function(){var a,b=document.getElementById("qunit-tests");c.checked?b.className+=" hidepass":(a=" "+b.className.replace(/[\n\t\r]/g," ")+" ",b.className=a.replace(/ hidepass /," "));w.sessionStorage&&(c.checked?sessionStorage.setItem("qunit-filter-passed-tests","true"):sessionStorage.removeItem("qunit-filter-passed-tests"))});if(d.hidepassed||w.sessionStorage&&sessionStorage.getItem("qunit-filter-passed-tests"))c.checked=!0,b=document.getElementById("qunit-tests"),b.className+=" hidepass";a.appendChild(c);b=document.createElement("label");b.setAttribute("for","qunit-filter-pass");b.setAttribute("title","Only show tests and assertons that fail. Stored in sessionStorage.");b.innerHTML="\u6210\u529f\u3057\u305f\u30c6\u30b9\u30c8\u3092\u975e\u8868\u793a\u306b\u3059\u308b";a.appendChild(b);b=document.createElement("span");b.innerHTML=f;f=b.getElementsByTagName("input");h=function(a){var b={};a=a.target||a.srcElement;b[a.name]=a.checked?!0:void 0;m.location=e.url(b)};for(var k=f.length;k--;)A(f[k],"click",h);a.appendChild(b);1<j&&(g=document.createElement("span"),g.setAttribute("id","qunit-modulefilter-container"),g.innerHTML=l,A(g.lastChild,"change",function(){var a=g.getElementsByTagName("select")[0],a=decodeURIComponent(a.options[a.selectedIndex].value);m.location=e.url({module:""===a?void 0:a})}),a.appendChild(g))}if(j=p("qunit-fixture"))d.fixture=j.innerHTML;d.autostart&&e.start()};A(m,"load",e.load);R=m.onerror;m.onerror=function(a,c,b){var d=!1;R&&(d=R(a,c,b));if(!0!==d){if(e.config.current){if(e.config.current.ignoreGlobalErrors)return!0;e.pushFailure(a,c+":"+b)}else e.test("global failure",r(function(){e.pushFailure(a,c+":"+b)},{validTest:P}));return!1}return d};var E,L=[],u=[],M=Object.getPrototypeOf||function(a){return a.__proto__},F;k=function(a,c){return a instanceof c.constructor||c instanceof a.constructor?c==a:c===a};F={string:k,"boolean":k,number:k,"null":k,undefined:k,nan:function(a){return isNaN(a)},date:function(a,c){return"date"===e.objectType(a)&&c.valueOf()===a.valueOf()},regexp:function(a,c){return"regexp"===e.objectType(a)&&c.source===a.source&&c.global===a.global&&c.ignoreCase===a.ignoreCase&&c.multiline===a.multiline&&c.sticky===a.sticky},"function":function(){var a=L[L.length-1];return a!==Object&&"undefined"!==typeof a},array:function(a,c){var b,d,h,f;if("array"!==e.objectType(a))return!1;h=c.length;if(h!==a.length)return!1;u.push(c);for(b=0;b<h;b++){f=!1;for(d=0;d<u.length;d++)u[d]===c[b]&&(f=!0);if(!f&&!E(c[b],a[b]))return u.pop(),!1}u.pop();return!0},object:function(a,c){var b,d,e,f=!0,g=[],l=[];if(c.constructor!==a.constructor&&!(null===M(c)&&M(a)===Object.prototype||null===M(a)&&M(c)===Object.prototype))return!1;L.push(c.constructor);u.push(c);for(b in c){e=!1;for(d=0;d<u.length;d++)u[d]===c[b]&&(e=!0);g.push(b);if(!e&&!E(c[b],a[b])){f=!1;break}}L.pop();u.pop();for(b in a)l.push(b);return f&&E(g.sort(),l.sort())}};E=function(){var a=[].slice.apply(arguments);if(2>a.length)a=!0;else{var c;if(a[0]===a[1])c=!0;else if(null===a[0]||null===a[1]||"undefined"===typeof a[0]||"undefined"===typeof a[1]||e.objectType(a[0])!==e.objectType(a[1]))c=!1;else{c=[a[1],a[0]];var b=e.objectType(a[0]);c=b?"function"===e.objectType(F[b])?F[b].apply(F,c):F[b]:void 0}a=c&&arguments.callee.apply(this,a.splice(1,a.length-1))}return a};e.equiv=E;k=function(a){return'"'+a.toString().replace(/"/g,'\\"')+'"'};q=function(a){return a+""};var O=function(a,c,b){var d=N.separator(),e=N.indent(),f=N.indent(1);c.join&&(c=c.join(","+d+f));return!c?a+b:[a,f+c,e+b].join(d)},B=function(a,c){var b=a.length,d=Array(b);for(this.up();b--;)d[b]=this.parse(a[b],void 0,c);this.down();return O("[",d,"]")},$=/^function (\w+)/,N={parse:function(a,c,b){b=b||[];var d,e=this.parsers[c||this.typeOf(a)];c=typeof e;a:if(d=b,d.indexOf)d=d.indexOf(a);else{for(var f=0,g=d.length;f<g;f++)if(d[f]===a){d=f;break a}d=-1}return-1!==d?"recursion("+(d-b.length)+")":"function"===c?(b.push(a),a=e.call(this,a,b),b.pop(),a):"string"===c?e:this.parsers.error},typeOf:function(a){return null===a?"null":"undefined"===typeof a?"undefined":e.is("regexp",a)?"regexp":e.is("date",a)?"date":e.is("function",a)?"function":void 0!==typeof a.setInterval&&"undefined"!==typeof a.document&&"undefined"===typeof a.nodeType?"window":9===a.nodeType?"document":a.nodeType?"node":"[object Array]"===W.call(a)||"number"===typeof a.length&&"undefined"!==typeof a.item&&(a.length?a.item(0)===a[0]:null===a.item(0)&&"undefined"===typeof a[0])?"array":a.constructor===Error.prototype.constructor?"error":typeof a},separator:function(){return this.multiline?this.HTML?"<br />":"\n":this.HTML?"\u00a0":" "},indent:function(a){if(!this.multiline)return"";var c=this.indentChar;this.HTML&&(c=c.replace(/\t/g,"   ").replace(/ /g,"\u00a0"));return Array(this._depth_+(a||0)).join(c)},up:function(a){this._depth_+=a||1},down:function(a){this._depth_-=a||1},setParser:function(a,c){this.parsers[a]=c},quote:k,literal:q,join:O,_depth_:1,parsers:{window:"[Window]",document:"[Document]",error:function(a){return'Error("'+a.message+'")'},unknown:"[Unknown]","null":"null",undefined:"undefined","function":function(a){var c="function",b="name"in a?a.name:($.exec(a)||[])[1];b&&(c+=" "+b);c=[c+"( ",e.jsDump.parse(a,"functionArgs"),"){"].join("");return O(c,e.jsDump.parse(a,"functionCode"),"}")},array:B,nodelist:B,arguments:B,object:function(a,c){var b=[],d,h,f,g;e.jsDump.up();d=[];for(h in a)d.push(h);d.sort();for(g=0;g<d.length;g++)h=d[g],f=a[h],b.push(e.jsDump.parse(h,"key")+": "+e.jsDump.parse(f,void 0,c));e.jsDump.down();return O("{",b,"}")},node:function(a){var c,b,d,h=a.nodeName.toLowerCase(),f="<"+h,g=a.attributes;if(g){b=0;for(c=g.length;b<c;b++)(d=g[b].nodeValue)&&"inherit"!==d&&(f+=" "+g[b].nodeName+"="+e.jsDump.parse(d,"attribute"))}f+=">";if(3===a.nodeType||4===a.nodeType)f+=a.nodeValue;return f+"</"+h+">"},functionArgs:function(a){var c=a.length;if(!c)return"";for(a=Array(c);c--;)a[c]=String.fromCharCode(97+c);return" "+a.join(", ")+" "},key:k,functionCode:"[code]",attribute:k,string:k,date:k,regexp:q,number:q,"boolean":q},HTML:!1,indentChar:"  ",multiline:!0};e.jsDump=N;e.diff=function(a,c){a=K(a.replace(/\s+$/,""));c=K(c.replace(/\s+$/,""));var b,d,e="",f=""===a?[]:a.split(/\s+/),g=""===c?[]:c.split(/\s+/);d={};var l={};for(b=0;b<g.length;b++)null==d[g[b]]&&(d[g[b]]={rows:[],o:null}),d[g[b]].rows.push(b);for(b=0;b<f.length;b++)null==l[f[b]]&&(l[f[b]]={rows:[],n:null}),l[f[b]].rows.push(b);for(b in d)J.call(d,b)&&1===d[b].rows.length&&void 0!==l[b]&&1===l[b].rows.length&&(g[d[b].rows[0]]={text:g[d[b].rows[0]],row:l[b].rows[0]},f[l[b].rows[0]]={text:f[l[b].rows[0]],row:d[b].rows[0]});for(b=0;b<g.length-1;b++)null!=g[b].text&&null==g[b+1].text&&g[b].row+1<f.length&&null==f[g[b].row+1].text&&g[b+1]==f[g[b].row+1]&&(g[b+1]={text:g[b+1],row:g[b].row+1},f[g[b].row+1]={text:f[g[b].row+1],row:b+1});for(b=g.length-1;0<b;b--)null!=g[b].text&&null==g[b-1].text&&0<g[b].row&&null==f[g[b].row-1].text&&g[b-1]==f[g[b].row-1]&&(g[b-1]={text:g[b-1],row:g[b].row-1},f[g[b].row-1]={text:f[g[b].row-1],row:b-1});var l=a.match(/\s+/g),k=c.match(/\s+/g);null==l?l=[" "]:l.push(" ");null==k?k=[" "]:k.push(" ");if(0===g.length)for(b=0;b<f.length;b++)e+="<del>"+f[b]+l[b]+"</del>";else{if(null==g[0].text)for(c=0;c<f.length&&null==f[c].text;c++)e+="<del>"+f[c]+l[c]+"</del>";for(b=0;b<g.length;b++)if(null==g[b].text)e+="<ins>"+g[b]+k[b]+"</ins>";else{d="";for(c=g[b].row+1;c<f.length&&null==f[c].text;c++)d+="<del>"+f[c]+l[c]+"</del>";e+=" "+g[b].text+k[b]+d}}return e};"undefined"!==typeof exports&&r(exports,e)})(this);