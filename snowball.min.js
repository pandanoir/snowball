(function(h){var a=h({});h.subscribe=function(){a.on.apply(a,arguments)};h.unsubscribe=function(){a.off.apply(a,arguments)};h.publish=function(){a.trigger.apply(a,arguments)}})(jQuery);
(function(h,a){function t(h,f){var e=r(h);a("#aft").val(h).select();a("#aft").parent().addClass("large").removeClass("hide");a("#bef").parent().addClass("small");var d=f-e;1024>f?(a("#befB").text(f+" B"),a("#aftB").text(e+" B"),a("#minus").text(f===e?"\u00b10B(0%)":"-"+d+" B("+(100-e/f*100).toFixed(2)+"%)")):(a("#befB").text((0|f/1024)+" KB("+f+" B)"),a("#aftB").text((0|e/1024)+" KB("+e+" B)"),a("#minus").text(f===e?"\u00b10B(0%)":"-"+(0|d/1024)+" KB("+d+" B)("+(100-e/f*100).toFixed(2)+"%)"));a("#mes").stop(!0,
!1).addClass("on").css("opacity","1").fadeTo(1500,.3,function(){a(this).removeClass("on")})}function r(a){for(var f=0,e=0,d=a.length;e<d;)f+=4>escape(a.charAt(e)).length?1:2,e+=1;return f}a(function(){a("body").on("dragover",function(a){a.preventDefault();a.stopPropagation();return!1});Array.prototype.has=function(a){var c=0,d=this.length-1,e;if(this[this.length-1]<a)return!1;for(;c<=d;)if(e=0|(c+d)/2,this[e]>a&&(d=e-1),this[e]<a&&(c=e+1),this[e]==a)return!0;return!1};var u=a("#rform"),f=a("#lform"),
e=a("#compress"),d=a("#options"),n=a("#option_menu"),q=a("#option"),v=a("#option_all"),p=!0,l,k,c,g,m,s;if(a.cookie("input_option")&&a.cookie("select_option")){l=JSON.parse(a.cookie("input_option"));k=JSON.parse(a.cookie("select_option"));c=0;for(g=a("input").length;c<g;c+=1)a("input").eq(c).prop("checked",!!l[a("input").eq(c).attr("id")]);c=0;for(g=a("select").length;c<g;c+=1)k[a("select").eq(c).attr("id")]&&a("select").eq(c).val(k[a("select").eq(c).attr("id")])}else{l={};k={};c=0;for(g=a("input").length;c<
g;c+=1)l[a("input").eq(c).attr("id")]=!!a("input").eq(c).prop("checked");c=0;for(g=a("select").length;c<g;c+=1)k[a("select").eq(c).attr("id")]=a("select").eq(c).find("option:selected").val()}q.prop("checked")?n.show():d.css("border-left","3px solid #CCC");u.css3form();m=n.find("div.customCheckBox").find("a");s=m.css("width");n.css("width");d.finda=function(a){return d.find("a").eq(a.index("input[type='checkbox']"))};!0==!!a("#HackMode").prop("checked")?(d.finda(a("#padding").attr("disabled",!0)).addClass("Hack"),
d.finda(a("#margin").attr("disabled",!0)).addClass("Hack")):(d.finda(a("#padding").attr("disabled",!1)).removeClass("Hack"),d.finda(a("#margin").attr("disabled",!1)).removeClass("Hack"));a("#HackMode").on("click",function(){!0==!a("#HackMode").prop("checked")?(d.finda(a("#padding").attr("disabled",!0)).addClass("Hack"),d.finda(a("#margin").attr("disabled",!0)).addClass("Hack")):(d.finda(a("#padding").attr("disabled",!1)).removeClass("Hack"),d.finda(a("#margin").attr("disabled",!1)).removeClass("Hack"))});
f.find(".select , .reset").on("click",function(b){a(this).siblings("textarea").select()}).end().find("#bef").select();e.on("click",function(b){b.preventDefault();b.stopPropagation();b=0;for(var c=a("input").length;b<c;b+=1)l[a("input").eq(b).attr("id")]=a("input").eq(b).prop("checked")&&!a("input").eq(b).is(":disabled");b=r(a("#bef").val());c=Compressors.compress(l,a("#bef").val());t(c.joinBlock(),b)});a("#bef,#aft").on("focus",function(){var b=a(this).attr("id");a(this).parent().hasClass("small")&&
(a(this).parent().removeClass("large small").addClass("large"),a("bef"==b?"#aft":"#bef").parent().removeClass("large small").addClass("small"))});if(h.File)a("#bef").on("dragenter",function(a){a.preventDefault();a.stopPropagation()}).on("dragover",function(a){a.originalEvent.dataTransfer.dropEffect="copy";a.preventDefault();a.stopPropagation()}).on("drop",function(b){b.preventDefault();b.stopPropagation();b=b.originalEvent;b=b.dataTransfer.files;k.encode=a("select").filter("#encode").find("option:selected").val();
c=0;for(g=b.length;c<g;c+=1){var d=new FileReader;d.readAsText(b[c],k.encode);d.onload=a.proxy(function(){a(this).val(d.result);e.trigger("click")},this)}});else a("#bef").attr("placeholder","\u3053\u3053\u306b\u30b3\u30fc\u30c9\u3092\u30da\u30fc\u30b9\u30c8\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u3069\u3046\u3084\u3089\u304a\u4f7f\u3044\u306e\u30d6\u30e9\u30a6\u30b6\u3067\u306f\u30c9\u30e9\u30c3\u30b0\u30a2\u30f3\u30c9\u30c9\u30ed\u30c3\u30d7\u306f\u5bfe\u5fdc\u3057\u3066\u3044\u306a\u3044\u3088\u3046\u3067\u3059\u3002");
a(h).on("keydown",function(b){if(68===b.keyCode&&b.shiftKey&&(b.ctrlKey&&!b.metaKey||!b.ctrlKey&&b.metaKey)&&b.altKey)return b.preventDefault(),a.publish("debug-start"),!1;(b.ctrlKery&&!b.metaKey||!b.ctrlKey&&b.metaKey)&&13===b.keyCode&&e.trigger("click")});q.on("click",function(a){m.is(":animated")||n.is(":animated")||(q.prop("checked")?(n.hide(),d.css("border-left","3px solid #CCC"),m.show().css("width",s)):(n.show(),d.css("border-left","none")))});v.on("click",function(a){if(m.is(":visible"))for(p=
!p,c=0,g=m.length;c<g;c+=1)(p&&!m.eq(c).hasClass("checked")||!p&&m.eq(c).hasClass("checked"))&&m.eq(c).click()});a("#save").on("click",function(b){l={};k={};b=0;for(var c=a("input").length;b<c;b++)l[a("input").eq(b).attr("id")]=!!a("input").eq(b).prop("checked");b=0;for(c=a("select").length;b<c;b++)k[a("select").eq(b).attr("id")]=a("select").eq(b).val();a.removeCookie("input_option");a.removeCookie("select_option");a.cookie("input_option",JSON.stringify(l),{expires:7});a.cookie("select_option",JSON.stringify(k),
{expires:7})});a("#wrench").on("click",function(b){b.preventDefault();b.stopPropagation();d.toggle();a("#results").toggle()});a("#compare").on("click",function(){event.preventDefault();event.stopPropagation();a("<form>").attr({method:"POST",action:"http://difff.jp",target:"_blank"}).append(a("<textarea>").val(a("#bef").val()).attr("name","sequenceA")).append(a("<textarea>").val(a("#aft").val()).attr("name","sequenceB")).submit()});a.subscribe("debug-start",function(){d.find(".customCheckBox").find("a");
a("body").addClass("debug");var b=[".white-space{\n\twhite-space: nowrap;\n\tbackground :#FFF!important;\n\tcolor : #FFFFFF !important ;\n\t margin:3px 3px 5px 3px;\n}\n@media screen and (max-device-width:480px){\n\t.black , .button {\n\tbackground:none;\n\tbackground-image:none;\n\t color:black;/*OK*/\n\t margin: 0px;\n\t opacity:0.9;\n\t padding:3px 3px 3px 3px;\n\t}\n}",".white-space{\n\twhite-space: nowrap;\n\tbackground :#FFF!important;\n\tcolor : #FFFFFF !important ;\n\t margin:3px 3px 5px 3px;\npadding:10px;\npadding-left:30px;\npadding-right:30px;\n}\n@media screen and (max-device-width:480px){\n\t.black , .button {\n\tbackground:none;\n\tbackground-image:none;\n\t color:black;/*OK*/\n\t margin: 0px;\n\t opacity:0.9;\n\t padding:3px 3px 3px 3px;\n\t}\n}",
'/* new clearfix */\n.clearfix:after {\n\tvisibility: hidden;\n\tdisplay: block;\n\tfont-size: 0;\n\tcontent: " ";\n\tclear: both;\n\theight: 0;\n\t}\n* html .clearfix             { zoom: 1; } /* IE6 */\n*:first-child+html .clearfix { zoom: 1; } /* IE7 */\n        '],c=[".white-space{white-space:nowrap;background:#fff!important;color:#fff!important;margin:3px 3px 5px}@media screen and (max-device-width:480px){.black,.button{background:none;background-image:none;color:#000;margin:0;opacity:.9;padding:3px}}",
".white-space{white-space:nowrap;background:#fff!important;color:#fff!important;margin:3px 3px 5px;padding:10px 30px}@media screen and (max-device-width:480px){.black,.button{background:none;background-image:none;color:#000;margin:0;opacity:.9;padding:3px}}",'.clearfix:after{visibility:hidden;display:block;font-size:0;content:" ";clear:both;height:0}* html .clearfix{zoom:1}*:first-child+html .clearfix{zoom:1}'];a("#bef").val(b[0]);a("#compress").trigger("click");setTimeout(function(){console.log(a("#aft").val()==
c[0]);a("#bef").val(b[1]);a("#compress").trigger("click");setTimeout(function(){console.log(a("#aft").val()==c[1]);a("#bef").val(b[2]);a("#compress").trigger("click");setTimeout(function(){console.log(a("#aft").val()==c[2])},3)},3)},10)});a("#bef").val();a("#body").children().css("display","block");0<location.href.split("?").slice(1).length&&"debug"===location.href.split("?").slice(1)[0]&&(a.publish("debug-start"),a("#save").trigger("click"))})})(this,jQuery);
